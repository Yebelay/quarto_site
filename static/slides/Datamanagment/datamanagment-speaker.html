<!DOCTYPE html>
<html lang="en"><head>
<link href="../../../Icon.png" rel="icon" type="image/png">
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">
<meta name="author" content="Yebelay Berehan">
<title>Yebelay Berehan - Advanced Data Managment Yebelay Berehan - Advanced Data Managment Yebelay Berehan - Advanced Data Managment Yebelay Berehan Welcome to my website Welcome to my website</title>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
<link rel="stylesheet" href="../../../site_libs/revealjs/dist/reset.css">
<link rel="stylesheet" href="../../../site_libs/revealjs/dist/reveal.css">
<style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #24292e;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #24292e; } /* Normal */
    code span.al { color: #ff5555; font-weight: bold; } /* Alert */
    code span.an { color: #6a737d; } /* Annotation */
    code span.at { color: #d73a49; } /* Attribute */
    code span.bn { color: #005cc5; } /* BaseN */
    code span.bu { color: #d73a49; } /* BuiltIn */
    code span.cf { color: #d73a49; } /* ControlFlow */
    code span.ch { color: #032f62; } /* Char */
    code span.cn { color: #005cc5; } /* Constant */
    code span.co { color: #6a737d; } /* Comment */
    code span.cv { color: #6a737d; } /* CommentVar */
    code span.do { color: #6a737d; } /* Documentation */
    code span.dt { color: #d73a49; } /* DataType */
    code span.dv { color: #005cc5; } /* DecVal */
    code span.er { color: #ff5555; text-decoration: underline; } /* Error */
    code span.ex { color: #d73a49; font-weight: bold; } /* Extension */
    code span.fl { color: #005cc5; } /* Float */
    code span.fu { color: #6f42c1; } /* Function */
    code span.im { color: #032f62; } /* Import */
    code span.in { color: #6a737d; } /* Information */
    code span.kw { color: #d73a49; } /* Keyword */
    code span.op { color: #24292e; } /* Operator */
    code span.ot { color: #6f42c1; } /* Other */
    code span.pp { color: #d73a49; } /* Preprocessor */
    code span.re { color: #6a737d; } /* RegionMarker */
    code span.sc { color: #005cc5; } /* SpecialChar */
    code span.ss { color: #032f62; } /* SpecialString */
    code span.st { color: #032f62; } /* String */
    code span.va { color: #e36209; } /* Variable */
    code span.vs { color: #032f62; } /* VerbatimString */
    code span.wa { color: #ff5555; } /* Warning */
  </style>
<link rel="stylesheet" href="../../../site_libs/revealjs/dist/theme/quarto.css">
<link href="../../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
<link href="../../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
<link href="../../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
<link href="../../../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
<link href="../../../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
<link href="../../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
<style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
<style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
<script src="../../../site_libs/kePrint-0.0.1/kePrint.js"></script><link href="../../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<meta property="og:title" content="Yebelay Berehan - Advanced Data Managment Yebelay Berehan Welcome to my website Welcome to my website">
<meta property="og:site_name" content="Yebelay Berehan">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="cover1.jpg" data-background-opacity="2.5" data-background-size="stretch" class="quarto-title-block center"><h1 class="title"></h1>
<p><span style="color:white"><span style="font-size: 270%;"><strong>Advanced Data Managment</strong></span></span></p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
<span style="color:black">Yebelay Berehan</span> 
</div>
        <p class="quarto-title-affiliation">
            </p>
<p><span style="color:green">Center for Evaluation and Development (C4ED)</span><br><br><br><br><span style="color:darkblue">2024-08-13</span></p>
          
    </div>
</div>

</section><section id="data-manipulation-and-claning-using-dplyr-package" class="slide level2"><h2>Data Manipulation and Claning using <code>dplyr()</code> package</h2>
<h3 id="what-is-tidyverse">What is Tidyverse?</h3>
<ul>
<li><p>The <code>tidyverse</code> library is a collection of several R packages that are designed to work together to make data manipulation and visualization tasks easier.</p></li>
<li><p>a suite of packages that implement tidy methods for data importing, cleaning, and wrangling.</p></li>
<li><p>Contains a series of packages useful for data analysis that work together well.</p></li>
<li><p>All packages included in <code>tidyverse</code> are automatically installed when installing the <code>tidyverse</code> package:</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="st">`</span><span class="at">install.packages("tidyverse")</span><span class="st">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a><span class="fu">tidyverse_packages</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li>Then to work functions under tidyverse package we must always load the package into the workplace.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a><span class="fu">library</span>(tidyverse) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li>Some packages under tidyverse are considered <code>core packages</code> and others called <code>friend packages</code>.</li>
</ul></section><section class="slide level2"><div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>install.packages(“tidyverse”)</strong></p>
</div>
<div class="callout-content">
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Core tidyverse</strong></p>
<ul>
<li>
<code>tibble</code>, for tibbles, a modern re-imagining of data frames</li>
<li>
<code>readr</code>, for data import</li>
<li>
<code>tidyr</code>, for data tidying</li>
<li>
<code>ggplot2</code>, for data visualization</li>
<li>
<code>dplyr</code>, for data manipulation</li>
<li>
<code>stringr</code>, for strings</li>
<li>
<code>forcats</code>, for factors</li>
<li>
<code>purrr</code>, for functional programming</li>
</ul>
</div><div class="column" style="width:50%;">
<p><strong>Friends for data import (beyond readr)</strong></p>
<ul>
<li>
<code>readxl</code>, for xls and xlsx files</li>
<li>
<code>haven</code>, for SPSS, SAS, and Stata files</li>
<li>
<code>jsonlite</code>, for JSON</li>
<li>
<code>xml2</code>, for XML</li>
<li>
<code>httr</code>, for web APIs</li>
<li>
<code>rvest</code>, for web scraping</li>
<li>
<code>DBI</code>, for databases</li>
</ul>
</div>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Friends for data wrangling</strong></p>
<ul>
<li>
<code>lubridate</code> and <code>hms</code>, for date/times</li>
</ul>
</div><div class="column" style="width:50%;">
<p><strong>Friends for modeling</strong></p>
<ul>
<li>
<code>modelr</code> and <code>broom</code> for model/tidy data</li>
</ul>
</div>
</div>
<ul>
<li>
</li></ul>
</div>
</div>
</div>
</section><section class="slide level2"><div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>readr()</strong></p>
</div>
<div class="callout-content">
<table>
<thead><tr class="header">
<th>Function</th>
<th>Function Reads</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>read_csv()</code></td>
<td>Comma separated values</td>
</tr>
<tr class="even">
<td><code>read_csv2()</code></td>
<td>Semi-colon separate values</td>
</tr>
<tr class="odd">
<td><code>read_delim()</code></td>
<td>General delimited files</td>
</tr>
<tr class="even">
<td><code>read_fwf()</code></td>
<td>Fixed width files</td>
</tr>
<tr class="odd">
<td><code>read_log()</code></td>
<td>Apache log files</td>
</tr>
<tr class="even">
<td><code>read_table()</code></td>
<td>Space separated files</td>
</tr>
<tr class="odd">
<td><code>read_tsv()</code></td>
<td>Tab delimited values</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tibbles</strong></p>
</div>
<div class="callout-content">
<ul>
<li>
<code>data.frames</code> are the basic form of rectangular data in R (columns of variables, rows of observations)</li>
<li>
<code>read_csv()</code> reads the data into a tibble, a modern version of the data frame.</li>
<li>a tibble is a data frame</li>
</ul>
</div>
</div>
</div>
</section><section id="haven" class="slide level2"><h2><code>haven()</code></h2>
<ul>
<li>
<code>haven</code> is not a core member of the tidyverse, so you need to load it.</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="import-data-using-haven">Import data using <code>haven()</code>
</h3>
<ul>
<li>
<code>read_sas()</code>: SAS</li>
<li>
<code>read_spss()</code>: SPSS</li>
<li>
<code>read_sav()</code>: SPSS</li>
<li>
<code>read_por()</code>: SPSS</li>
<li>
<code>read_stata()</code>: Stata</li>
<li>
<code>read_dta()</code>: Stata</li>
</ul>
</div><div class="column" style="width:50%;">
<h3 id="export-data">Export data</h3>
<ul>
<li>
<code>write_csv()</code>: Comma separated values</li>
<li>
<code>write_excel_csv()</code>: CSV to open in Excel</li>
<li>
<code>write_delim()</code>: General delimited files</li>
<li>
<code>write_sas()</code>: SAS .sas7bdat files</li>
<li>
<code>write_sav()</code>: SPSS .sav files</li>
<li>
<code>write_stata()</code>: Stata .dta files</li>
</ul>
</div>
</div>
</section><section id="intro-to-dplyr-package" class="slide level2"><h2>Intro to <code>dplyr</code> package</h2>
<ul>
<li><p>The <span style="color:red"><strong><code>dplyr</code></strong></span> provides a “grammar” (the verbs) for data manipulation and for operating on data frames in a tidy way.</p></li>
<li><p>The key operator and the essential verbs are:</p></li>
</ul>
<ol type="1">
<li><p><span style="color:red">%&gt;%</span>: the “pipe” operator used to connect multiple verb actions together into a pipeline.</p></li>
<li><p><span style="color:red">select()</span>: return a subset of the columns of a data frame.</p></li>
<li><p><span style="color:red">mutate()</span>: add new variables/columns or transform existing variables.</p></li>
<li><p><span style="color:red">filter()</span>: extract a subset of rows from a data frame based on logical conditions.</p></li>
<li><p><span style="color:red">arrange()</span>: reorder rows of a data frame according to single or multiple variables.</p></li>
<li><p><span style="color:red">summarise() / summarize()</span>: reduce each group to a single row by calculating aggregate measures.</p></li>
</ol>
<ul>
<li>We can have a look at the data and its structure by using the <span style="color:red"><code>glimpse()</code></span> function from the <code>dplyr</code> package.</li>
</ul></section><section id="a-manipulating-variables" class="slide level2"><h2>a) Manipulating variables:</h2>
<p><code>select()</code>: To extract variables</p>
<ul>
<li>Our first verb on the list is <code>select</code> which allows to keep or drop variables from your dataframe. Choosing your variables is the first step in cleaning your data.</li>
</ul>

<img data-src="img/final_dplyr_select.png" width="497" class="r-stretch"><ul>
<li>
<code>select()</code> is especially useful because it is quite flexible in its use to create new tables.</li>
</ul></section><section id="the-covid-19-dataset" class="slide level2"><h2>The COVID-19 dataset</h2>
<ul>
<li><p>Lets us use a COVID-19 which is serological survey conducted in Yaounde, Cameroon in late 2020.</p></li>
<li><p>The survey estimated how many people had been infected with COVID-19 in the region, by testing for IgG and IgM antibodies.</p></li>
<li><p>The full dataset can be obtained from <a href="https://zenodo.org/record/5218965" target="_blank">Zenodo</a>, and the paper can be viewed <a href="https://www.nature.com/articles/s41467-021-25946-0" target="_blank">here</a>.</p></li>
<li><p>There are some demographic, socio-economic and COVID-related variables.</p></li>
<li><p>The results of the IgG and IgM antibody tests are in the columns <code>igg_result</code> and <code>igm_result</code>.</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a><span class="fu">library</span>(readr); <span class="fu">library</span>(dplyr)</span>
<span id="cb4-2"><a></a>yaounde <span class="ot">&lt;-</span> yaounde_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"C:/quarto_site/static/slides/Datamanagment/data/yaounde_data.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section class="slide level2"><ul>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/select.html">dplyr::select()</a></code> lets us pick which columns (variables) to keep or drop.</li>
</ul>
<p>We can select a column <strong>by name</strong>:</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a>yaounde <span class="sc">%&gt;%</span> <span class="fu">select</span>(age) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section class="slide level2"><p>Or we can select a column <strong>by position</strong>:</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a>yaounde <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="dv">3</span>) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>To select <strong>multiple variables</strong>, we separate them with commas:</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a>yaounde <span class="sc">%&gt;%</span> <span class="fu">select</span>(age, sex, igg_result) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li>Select the 16th and 22nd columns in the <code>yaounde</code> data frame.</li>
</ul></section><section class="slide level2"><ul>
<li>For the next part of the tutorial, let’s create a smaller subset of the data, called <code>yao</code>.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a>yao <span class="ot">&lt;-</span>  yaounde <span class="sc">%&gt;%</span> <span class="fu">select</span>(age, sex, highest_education, occupation,</span>
<span id="cb8-2"><a></a>                     is_smoker, is_pregnant, igg_result, igm_result)</span>
<span id="cb8-3"><a></a><span class="fu">head</span>(yao, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section class="slide level2"><h3 id="selecting-column-ranges-with">Selecting column ranges with <code>:</code>
</h3>
<p>The <code>:</code> operator selects a <strong>range of consecutive variables</strong>:</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a>yao <span class="sc">%&gt;%</span> <span class="fu">select</span>(age<span class="sc">:</span>occupation) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We can also specify a range with column numbers:</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a>yao <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section class="slide level2"><h3 id="excluding-columns-with">Excluding columns with <code>!</code>
</h3>
<p>The <strong>exclamation point</strong> negates a selection:</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a>yao <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">!</span>age) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>To drop a range of consecutive columns, we use, for example,<code>!age:occupation</code>:</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a>yao <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">!</span>age<span class="sc">:</span>occupation) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>To drop several non-consecutive columns, place them inside <code>!c()</code>:</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a>yao <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(age, sex, igg_result)) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="helper-functions-for-select" class="slide level2"><h2>Helper functions for <code>select()</code>
</h2>
<p><code>dplyr</code> has a number of helper functions to make selecting easier by using patterns from the column names. Let’s take a look at some of these.</p>
<h3 id="starts_with-and-ends_with">
<code>starts_with()</code> and <code>ends_with()</code>
</h3>
<p>These two helpers work exactly as their names suggest!</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a></a>yao <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"is_"</span>)) <span class="co"># Columns that start with "is"</span></span>
<span id="cb14-2"><a></a>yao <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">"_result"</span>)) <span class="co"># Columns that end with "result"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section class="slide level2"><h3 id="contains"><code>contains()</code></h3>
<p><code>contains()</code> helps select columns that contain a certain string:</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a>yaounde <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"drug"</span>)) <span class="co"># Columns that contain the string "drug"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section class="slide level2"><h3 id="everything"><code>everything()</code></h3>
<p>Another helper function, <code>everything()</code>, matches all variables that have not yet been selected.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a></a><span class="do">## First, `is_pregnant`, then every other column.</span></span>
<span id="cb16-2"><a></a>yao <span class="sc">%&gt;%</span> <span class="fu">select</span>(is_pregnant, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>It is often useful for establishing the order of columns.</p>
<p>Say we wanted to bring the <code>is_pregnant</code> column to the start of the <code>yao</code> data frame, we could type out all the column names manually:</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a>yao <span class="sc">%&gt;%</span> <span class="fu">select</span>(is_pregnant, age, sex, highest_education, occupation, </span>
<span id="cb17-2"><a></a>               is_smoker, igg_result, igm_result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section class="slide level2"><ul>
<li>But this would be painful for larger data frames, such as our original <code>yaounde</code> data frame. In such a case, we can use <code>everything()</code>:</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a></a><span class="do">## Bring `is_pregnant` to the front of the data frame</span></span>
<span id="cb18-2"><a></a>yaounde <span class="sc">%&gt;%</span> <span class="fu">select</span>(is_pregnant, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li>This helper can be combined with many others.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a></a><span class="do">## Bring columns that end with "result" to the front of the data frame</span></span>
<span id="cb19-2"><a></a>yaounde <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">"result"</span>), <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="change-column-names-with-rename" class="slide level2"><h2>Change column names with <code>rename()</code>
</h2>

<img data-src="img/dplyr_rename.png" width="547" class="r-stretch"><p><a href="https://dplyr.tidyverse.org/reference/rename.html"><code>dplyr::rename()</code></a> is used to change column names:</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a></a><span class="do">## Rename `age` and `sex` to `patient_age` and `patient_sex`</span></span>
<span id="cb20-2"><a></a>yaounde <span class="sc">%&gt;%</span> </span>
<span id="cb20-3"><a></a>  <span class="fu">rename</span>(<span class="at">patient_age =</span> age, <span class="at">patient_sex =</span> sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="rename-within-select" class="slide level2"><h2>Rename within <code>select()</code>
</h2>
<p>You can also rename columns while selecting them:</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a></a><span class="do">## Select `age` and `sex`, and rename them to `patient_age` and `patient_sex`</span></span>
<span id="cb21-2"><a></a>yaounde <span class="sc">%&gt;%</span> </span>
<span id="cb21-3"><a></a>  <span class="fu">select</span>(<span class="at">patient_age =</span> age, <span class="at">patient_sex =</span> sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="rename-within-select-1" class="slide level2"><h2>Rename within <code>select()</code>
</h2>
<ul>
<li>Delete columns you don’t need with <code>-</code> (remember, if you delete multiple columns use <code>select(-c())</code> so that <code>-</code> is applied to all of them).</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a></a>airquality <span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">5</span>)) <span class="sc">%&gt;%</span> <span class="co"># Delete columns with `-`</span></span>
<span id="cb22-3"><a></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li>Define the chosen columns in a vector beforehand and then recall it with <code>!!</code>.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a></a>air_cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Wind"</span>, <span class="st">"Tem"</span>, <span class="st">"Day"</span>)</span>
<span id="cb23-2"><a></a>airquality <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a></a>  <span class="fu">select</span>(<span class="sc">!!</span>air_cols) <span class="sc">%&gt;%</span> <span class="co"># Call a vector of column names with `!!`</span></span>
<span id="cb23-4"><a></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section class="slide level2"><ul>
<li>You can also select columns based on their data type using <code>select_if()</code>.</li>
<li>The common data types to be called are: <code>is.character</code>, <code>is.double</code>, <code>is.factor</code>, <code>is.integer</code>, <code>is.logical</code>, <code>is.numeric</code>.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a></a>airquality <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a></a>  <span class="fu">select_if</span>(is.numeric) <span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a></a>  <span class="fu">glimpse</span>()  <span class="co"># numeric data types only selected (here: integer or double)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li>You can also mix various ways to call columns within <code>select()</code>:</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a></a>airquality <span class="sc">%&gt;%</span> <span class="fu">select</span>(Day,  <span class="co"># put Day first</span></span>
<span id="cb25-2"><a></a>                   Ozone<span class="sc">:</span>Wind,  <span class="co"># add columns between `Ozone` and `Wind`</span></span>
<span id="cb25-3"><a></a>                   <span class="at">Solar.Radiation =</span> Solar.R,  <span class="co"># rename `Solar.R` to lowercase</span></span>
<span id="cb25-4"><a></a>                   <span class="fu">starts_with</span>(<span class="st">"M"</span>),  <span class="co"># add columns starting with "M"</span></span>
<span id="cb25-5"><a></a>                   <span class="fu">everything</span>())<span class="sc">%&gt;%</span>  <span class="co"># add all the other columns</span></span>
<span id="cb25-6"><a></a>  <span class="fu">glimpse</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section class="slide level2"><div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Summary for <code>Select()</code> function</strong></p>
</div>
<div class="callout-content">
<ul>
<li>There are five ways to select variables in <code>select(data, ...)</code>:</li>
</ul>
<ol type="1">
<li>
<strong>By position:</strong> <code>iris %&gt;% select(1, 2, 4)</code> or<code>iris %&gt;% select(1:2)</code>.</li>
<li>
<strong>By name:</strong> <code>iris %&gt;% select(Sepal.Length, Sepal.Width, Petal.Length)</code>, or <code>iris %&gt;% select(Sepal.Length:Petal.Length)</code>.</li>
<li>
<strong>By function of name:</strong> <code>iris %&gt;% select(starts_with("s"))</code>, or <code>iris %&gt;% select(ends_with("s"))</code>. You can also use helpers contains() and matches() for more flexibly matching.</li>
<li>
<strong>By type:</strong> <code>iris %&gt;% select(where(is.numeric))</code>,or <code>iris %&gt;% select(where(is.factor))</code>.</li>
<li>
<strong>By any combination of the above using the Boolean operators !, &amp;, and |:</strong>
<ul>
<li>
<code>iris %&gt;% select(!where(is.factor)):</code> selects all non-factor variables.</li>
<li>
<code>iris %&gt;% select(where(is.numeric) &amp; starts_with("S")):</code> selects all numeric variables that starts with ‘S’.</li>
<li>
<code>iris %&gt;% select(starts_with("P") | ends_with("h")):</code> selects all variables that starts with ‘P’ or ends with ‘h’.</li>
</ul>
</li>
</ol>
</div>
</div>
</div>
</section><section id="rename-to-rename-variables" class="slide level2"><h2>
<code>rename()</code> : To rename variables</h2>
<ul>
<li>If we want to change lowercase variables to uppercase, we can use <code>rename()</code>, or <code>rename_with()</code>.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a></a>airquality <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a></a>  <span class="fu">rename</span>(<span class="at">day =</span> Day,</span>
<span id="cb26-3"><a></a>         <span class="at">month =</span> Month,</span>
<span id="cb26-4"><a></a>         <span class="at">wind =</span> Wind) <span class="sc">%&gt;%</span>  <span class="co"># renames only chosen columns</span></span>
<span id="cb26-5"><a></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li>If we just want column names to be changed with a function, we can use <code>rename_with</code> which is useful in this case since we can rename them with <code>tolower</code>.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a></a>airquality <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a></a>  <span class="fu">rename_with</span>(tolower) <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a></a>  <span class="fu">glimpse</span>()</span>
<span id="cb27-4"><a></a><span class="co"># If you didn't want all of them renamed, you could specify columns with `.cols =`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section class="slide level2"><ul>
<li>We could have achieved the same as above by selecting all columns and applying <code>tolower</code>.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a></a>airquality1 <span class="ot">&lt;-</span> airquality <span class="sc">%&gt;%</span>  <span class="co"># let's save this one!</span></span>
<span id="cb28-2"><a></a>  <span class="fu">select_all</span>(tolower) <span class="sc">%&gt;%</span></span>
<span id="cb28-3"><a></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li>If we wanted only some of them renamed and kept, we could have used <code>select_at()</code> which specifies columns with <code>vars()</code>.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a></a><span class="co"># Select and rename a couple of columns only</span></span>
<span id="cb29-2"><a></a>airquality <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a></a>  <span class="fu">select_at</span>(<span class="fu">vars</span>(Ozone, Month, Day), tolower) <span class="sc">%&gt;%</span></span>
<span id="cb29-4"><a></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section class="slide level2"><ul>
<li>
<p>Also the following are other important function</p>
<ul>
<li>
<code>_all()</code> if you want to apply the function to all columns</li>
<li>
<code>_at()</code> if you want to apply the function to specific columns (specify them with <code>vars()</code>)</li>
<li>
<code>_if()</code> if you want to apply the function to columns of a certain characteristic (e.g.&nbsp;data type)</li>
<li>
<code>_with()</code> if you want to apply the function to columns and include another function within it</li>
</ul>
</li>
<li><p>These variants are quite flexible, and keep changing for individual functions (e.g.&nbsp;RStudio tells me now that <code>rename_with()</code> has superseded previously used <code>rename_all()</code>, <code>rename_at()</code>, <code>rename_if()</code>).</p></li>
</ul></section><section id="filter" class="slide level2"><h2><code>filter()</code></h2>
<ul>
<li>Dropping abnormal data entries or keeping subsets of your data points is another essential aspect of data wrangling.</li>
</ul>
<p>Let’s go !<br></p>
<p><img data-src="img/custom_dplyr_filter.png" width="400" alt="Fig: the filter() verb."><br></p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a></a>yao <span class="ot">&lt;-</span> yaounde <span class="sc">%&gt;%</span> </span>
<span id="cb30-2"><a></a>  <span class="fu">select</span>(age, sex, weight_kg, highest_education, neighborhood, </span>
<span id="cb30-3"><a></a>         occupation, is_smoker, is_pregnant, </span>
<span id="cb30-4"><a></a>         igg_result, igm_result)</span>
<span id="cb30-5"><a></a><span class="co">#yao</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section class="slide level2"><ul>
<li>We use <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code> to keep rows that satisfy a set of conditions.</li>
<li>If we want to keep just the male records, we run:</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a></a>yao <span class="sc">%&gt;%</span> <span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">"Male"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li>Note the use of the double equal sign <code>==</code> rather than the single equal sign <code>=</code>. The <code>==</code> sign tests for equality, as demonstrated below:</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a></a><span class="do">### create the object `sex_vector` with three elements</span></span>
<span id="cb32-2"><a></a>sex_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Male"</span>, <span class="st">"Female"</span>, <span class="st">"Female"</span>)</span>
<span id="cb32-3"><a></a><span class="do">### test which elements are equal to "Male"</span></span>
<span id="cb32-4"><a></a>sex_vector <span class="sc">==</span> <span class="st">"Male"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li>So the code <code>yao %&gt;% filter(sex == "Male")</code> will keep all rows where the equality test <code>sex == "Male"</code> evaluates to <code>TRUE</code>.</li>
</ul></section><section class="slide level2"><ul>
<li>It is often useful to chain <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code> with <code><a href="https://rdrr.io/r/base/nrow.html">nrow()</a></code> to get the number of rows fulfilling a condition.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a></a><span class="do">### how many respondents were male?</span></span>
<span id="cb33-2"><a></a>yao <span class="sc">%&gt;%</span> <span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">"Male"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb33-3"><a></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div title="Key Point">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Key Point</strong></p>
</div>
<div class="callout-content">
<p>The double equal sign, <code>==</code>, tests for equality, while the single equals sign, <code>=</code>, is used for specifying values to arguments inside functions.</p>
</div>
</div>
</div>
</div>
</section><section id="relational-operators" class="slide level2"><h2>Relational operators</h2>
<ul>
<li>The <code>==</code> operator introduced above is an example of a “relational” operator, as it tests the relation between two values. Here is a list of some of these operators:</li>
</ul>
<table><tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Operator</strong></td>
<td style="text-align: left;"><strong>is TRUE if</strong></td>
</tr>
<tr class="even">
<td style="text-align: left;">A &lt; B</td>
<td style="text-align: left;">A is <strong>less than</strong> B</td>
</tr>
<tr class="odd">
<td style="text-align: left;">A &lt;= B</td>
<td style="text-align: left;">A is <strong>less than or equal</strong> to B</td>
</tr>
<tr class="even">
<td style="text-align: left;">A &gt; B</td>
<td style="text-align: left;">A is <strong>greater than</strong> B</td>
</tr>
<tr class="odd">
<td style="text-align: left;">A &gt;= B</td>
<td style="text-align: left;">A is <strong>greater than or equal to</strong> B</td>
</tr>
<tr class="even">
<td style="text-align: left;">A == B</td>
<td style="text-align: left;">A is <strong>equal</strong> to B</td>
</tr>
<tr class="odd">
<td style="text-align: left;">A != B</td>
<td style="text-align: left;">A is <strong>not equal</strong> to B</td>
</tr>
<tr class="even">
<td style="text-align: left;">A %in% B</td>
<td style="text-align: left;">A <strong>is an element of</strong> B</td>
</tr>
</tbody></table></section><section class="slide level2">
<img data-src="img/venn_diagram_and_or.png" width="450" class="r-stretch quarto-figure-center"><p class="caption">Fig: AND and OR operators visualized.</p></section><section class="slide level2"><p>Let’s see how to use these within <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code>:</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a></a>yao <span class="sc">%&gt;%</span> <span class="fu">filter</span>(sex <span class="sc">!=</span> <span class="st">"Male"</span>) <span class="do">## keep rows where `sex` is not "Male"</span></span>
<span id="cb34-2"><a></a>yao <span class="sc">%&gt;%</span> <span class="fu">filter</span>(age <span class="sc">&lt;</span> <span class="dv">6</span>) <span class="do">## keep respondents under 6</span></span>
<span id="cb34-3"><a></a>yao <span class="sc">%&gt;%</span> <span class="fu">filter</span>(age <span class="sc">&gt;=</span> <span class="dv">70</span>) <span class="do">## keep respondents aged at least 70</span></span>
<span id="cb34-4"><a></a></span>
<span id="cb34-5"><a></a><span class="do">### keep respondents whose highest education is "Primary" or "Secondary"</span></span>
<span id="cb34-6"><a></a>yao <span class="sc">%&gt;%</span> <span class="fu">filter</span>(highest_education <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Primary"</span>, <span class="st">"Secondary"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="combining-conditions-with-and" class="slide level2"><h2>Combining conditions with <code>&amp;</code> and <code>|</code>
</h2>
<ul>
<li>We can pass multiple conditions to a single <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code> statement separated by commas:</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a></a><span class="do">### keep respondents who are pregnant and are ex-smokers</span></span>
<span id="cb35-2"><a></a>yao <span class="sc">%&gt;%</span> <span class="fu">filter</span>(is_pregnant <span class="sc">==</span> <span class="st">"Yes"</span>, is_smoker <span class="sc">==</span> <span class="st">"Ex-smoker"</span>) <span class="do">## only one row</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li>When multiple conditions are separated by a comma, they are implicitly combined with an <strong>and</strong> (<code>&amp;</code>).</li>
</ul></section><section class="slide level2"><ul>
<li>It is best to replace the comma with <code>&amp;</code> to make this more explicit.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a></a><span class="do">### same result as before, but `&amp;` is more explicit</span></span>
<span id="cb36-2"><a></a>yao <span class="sc">%&gt;%</span> <span class="fu">filter</span>(is_pregnant <span class="sc">==</span> <span class="st">"Yes"</span> <span class="sc">&amp;</span> is_smoker <span class="sc">==</span> <span class="st">"Ex-smoker"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div title="Side Note">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Side Note</strong></p>
</div>
<div class="callout-content">
<p>Don’t confuse:</p>
<ul>
<li><p>the “,” in listing several conditions in filter <code>filter(A,B)</code> i.e.&nbsp;filter based on condition A and (<code>&amp;</code>) condition B</p></li>
<li><p>the “,” in lists <code>c(A,B)</code> which is listing different components of the list (and has nothing to do with the <code>&amp;</code> operator)</p></li>
</ul>
</div>
</div>
</div>
</div>
<ul>
<li>If we want to combine conditions with an <strong>or</strong>, we use the vertical bar symbol, <code>|</code>.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a></a><span class="do">### respondents who are pregnant OR who are ex-smokers</span></span>
<span id="cb37-2"><a></a>yao <span class="sc">%&gt;%</span> <span class="fu">filter</span>(is_pregnant <span class="sc">==</span> <span class="st">"Yes"</span> <span class="sc">|</span> is_smoker <span class="sc">==</span> <span class="st">"Ex-smoker"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="negating-conditions-with" class="slide level2"><h2>Negating conditions with <code>!</code>
</h2>
<ul>
<li><p>To negate conditions, we wrap them in <code>!()</code>.</p></li>
<li><p>Below, we drop respondents who are children (less than 18 years) or who weigh less than 30kg:</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a></a><span class="do">### drop respondents &lt; 18 years OR &lt; 30 kg</span></span>
<span id="cb38-2"><a></a>yao <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span>(age <span class="sc">&lt;</span> <span class="dv">18</span> <span class="sc">|</span> weight_kg <span class="sc">&lt;</span> <span class="dv">30</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li>The <code>!</code> operator is also used to negate <code>%in%</code> since R does not have an operator for <strong>NOT in</strong>.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a></a><span class="do">### drop respondents whose highest education is NOT "Primary" or "Secondary"</span></span>
<span id="cb39-2"><a></a>yao <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span>(highest_education <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Primary"</span>, <span class="st">"Secondary"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section class="slide level2"><div title="Key Point">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Key Point</strong></p>
</div>
<div class="callout-content">
<ul>
<li><p>It is easier to read <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code> statements as <strong>keep</strong> statements, to avoid confusion over whether we are filtering <strong>in</strong> or filtering <strong>out</strong>!</p></li>
<li><p>So the code below would read: “<strong>keep</strong> respondents who are under 18 or who weigh less than 30kg”.</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a></a>yao <span class="sc">%&gt;%</span> <span class="fu">filter</span>(age <span class="sc">&lt;</span> <span class="dv">18</span> <span class="sc">|</span> weight_kg <span class="sc">&lt;</span> <span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li>And when we wrap conditions in <code>!()</code>, we can then read <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code> statements as <strong>drop</strong> statements.</li>
</ul>
<p>So the code below would read: “<strong>drop</strong> respondents who are under 18 or who weigh less than 30kg”.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a></a>yao <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span>(age <span class="sc">&lt;</span> <span class="dv">18</span> <span class="sc">|</span> weight_kg <span class="sc">&lt;</span> <span class="dv">30</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</div>
</section><section id="na-values" class="slide level2"><h2>
<code>NA</code> values</h2>
<ul>
<li>The relational operators introduced so far do not work with <code>NA</code>.</li>
</ul>
<p>Let’s make a data subset to illustrate this.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a></a>yao_mini <span class="ot">&lt;-</span> yao <span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a></a>  <span class="fu">select</span>(sex, is_pregnant) <span class="sc">%&gt;%</span> </span>
<span id="cb42-3"><a></a>  <span class="fu">slice</span>(<span class="dv">1</span>,<span class="dv">11</span>,<span class="dv">50</span>,<span class="dv">2</span>) <span class="do">## custom row order</span></span>
<span id="cb42-4"><a></a></span>
<span id="cb42-5"><a></a>yao_mini</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li><p>In <code>yao_mini</code>, the last respondent has an <code>NA</code> for the <code>is_pregnant</code> column, because he is male.</p></li>
<li><p>Trying to select this row using <code>== NA</code> will not work.</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a></a>yao_mini <span class="sc">%&gt;%</span> <span class="fu">filter</span>(is_pregnant <span class="sc">==</span> <span class="cn">NA</span>) <span class="do">## does not work</span></span>
<span id="cb43-2"><a></a>yao_mini <span class="sc">%&gt;%</span> <span class="fu">filter</span>(is_pregnant <span class="sc">==</span> <span class="st">"NA"</span>) <span class="do">## does not work</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li>This is because <code>NA</code> is a non-existent value. So R cannot evaluate whether it is “equal to” or “not equal to” anything.</li>
</ul></section><section class="slide level2"><p>The special function <code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code> is therefore necessary:</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a></a><span class="do">### keep rows where `is_pregnant` is NA</span></span>
<span id="cb44-2"><a></a>yao_mini <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(is_pregnant)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>This function can be negated with <code>!</code>:</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a></a><span class="do">### drop rows where `is_pregnant` is NA</span></span>
<span id="cb45-2"><a></a>yao_mini <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(is_pregnant))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div title="Side Note">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Side Note</strong></p>
</div>
<div class="callout-content">
<p>For tibbles, RStudio will highlight <code>NA</code> values bright red to distinguish them from other values:</p>
<div class="quarto-figure quarto-figure-center">
<figure><p><img data-src="img/tibble_with_na.png" width="300"></p>
<figcaption>A common error with <code>NA</code></figcaption></figure>
</div>
</div>
</div>
</div>
</div>
</section><section class="slide level2"><div title="Side Note">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Side Note</strong></p>
</div>
<div class="callout-content">
<p><code>NA</code> values can be identified but any other encoding such as <code>"NA"</code> or <code>"NaN"</code>, which are encoded as strings, will be imperceptible to the functions (they are strings, like any others).</p>
</div>
</div>
</div>
</div>
</section><section id="how-to-use-mutate-function-in-r" class="slide level2"><h2>How to Use Mutate function in R</h2>
<ul>
<li><p>The dplyr library has the following functions that can be used to add additional variables to a data frame.</p></li>
<li><p><strong><code>mutate()</code></strong> – adds new variables while retaining old variables to a data frame.</p></li>
<li><p><strong><code>transmute()</code></strong> – adds new variables and removes old ones from a data frame.</p></li>
<li><p><strong><code>mutate_all()</code></strong> – changes every variable in a data frame simultaneously.</p></li>
<li><p><strong><code>mutate_at()</code></strong> – changes certain variables by name.</p></li>
<li><p><strong><code>mutate_if()</code></strong> – alterations all variables that satisfy a specific criterion</p></li>
</ul></section><section id="mutate" class="slide level2"><h2><code>mutate()</code></h2>
<ul>
<li>A data frame’s existing variables are preserved when new variables are added using the <code>mutate()</code> function.</li>
<li>The <code>mutate()</code> basic syntax is as follows.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a></a>data <span class="ot">&lt;-</span> <span class="fu">mutate</span>(<span class="at">new_variable =</span> existing_variable<span class="sc">/</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li>
<strong><code>data</code>:</strong> the fresh data frame where the fresh variables will be placed</li>
<li>
<strong><code>new_variable</code>:</strong> the name of the new variable</li>
<li>
<strong><code>existing_variable</code>:</strong> the current data frame variable that you want to modify in order to generate a new variable</li>
<li>Set the new column’s root sepal width to the sepal’s square root. variable width</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a></a><span class="fu">library</span>(dplyr)</span>
<span id="cb47-2"><a></a>data <span class="ot">&lt;-</span> <span class="fu">head</span>(iris)</span>
<span id="cb47-3"><a></a>data <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">root_sepal_width =</span> <span class="fu">sqrt</span>(Sepal.Width)) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species root_sepal_width
1          5.1         3.5          1.4         0.2  setosa         1.870829
2          4.9         3.0          1.4         0.2  setosa         1.732051
3          4.7         3.2          1.3         0.2  setosa         1.788854</code></pre>
</div>
</div>
</section><section id="transmute" class="slide level2"><h2><code>transmute()</code></h2>
<ul>
<li><p>A data frame’s variables are added and removed via the transmute() method.</p></li>
<li><p>The code that follows demonstrates how to eliminate all of the existing variables and add two new variables to a dataset.</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a></a>data <span class="sc">%&gt;%</span> <span class="fu">transmute</span>(<span class="at">root_sepal_width =</span> <span class="fu">sqrt</span>(Sepal.Width), </span>
<span id="cb49-2"><a></a>                   <span class="at">root_petal_width =</span> <span class="fu">sqrt</span>(Petal.Width))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  root_sepal_width root_petal_width
1         1.870829        0.4472136
2         1.732051        0.4472136
3         1.788854        0.4472136
4         1.760682        0.4472136
5         1.897367        0.4472136
6         1.974842        0.6324555</code></pre>
</div>
</div>
</section><section id="mutate_all" class="slide level2"><h2><code>mutate_all()</code></h2>
<ul>
<li><p>The <code>mutate_all()</code> function changes every variable in a data frame at once, enabling you to use the <code>funs()</code> function to apply a certain function to every variable.</p></li>
<li><p>The use of <code>mutate_all()</code> to divide each column in a data frame by ten is demonstrated in the code below.</p></li>
<li><p>divide 10 from each of the data frame’s variables.</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a></a>data2 <span class="ot">&lt;-</span> <span class="fu">head</span>(iris) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>Species)</span>
<span id="cb51-2"><a></a>data2 <span class="sc">%&gt;%</span> <span class="fu">mutate_all</span>(<span class="fu">funs</span>(.<span class="sc">/</span><span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width
1         0.51        0.35         0.14        0.02
2         0.49        0.30         0.14        0.02
3         0.47        0.32         0.13        0.02
4         0.46        0.31         0.15        0.02
5         0.50        0.36         0.14        0.02
6         0.54        0.39         0.17        0.04</code></pre>
</div>
</div>
</section><section class="slide level2"><ul>
<li>Remember that you can add more variables to the data frame by supplying a new name to be prefixed to the existing variable name.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a></a>data2 <span class="sc">%&gt;%</span> <span class="fu">mutate_all</span>(<span class="fu">funs</span>(<span class="at">mod =</span> .<span class="sc">/</span><span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Sepal.Length_mod
1          5.1         3.5          1.4         0.2             0.51
2          4.9         3.0          1.4         0.2             0.49
3          4.7         3.2          1.3         0.2             0.47
4          4.6         3.1          1.5         0.2             0.46
5          5.0         3.6          1.4         0.2             0.50
6          5.4         3.9          1.7         0.4             0.54
  Sepal.Width_mod Petal.Length_mod Petal.Width_mod
1            0.35             0.14            0.02
2            0.30             0.14            0.02
3            0.32             0.13            0.02
4            0.31             0.15            0.02
5            0.36             0.14            0.02
6            0.39             0.17            0.04</code></pre>
</div>
</div>
</section><section id="mutate_at" class="slide level2"><h2><code>mutate_at()</code></h2>
<ul>
<li><p>Using names, the <code>mutate at()</code> function changes particular variables.</p></li>
<li><p>The use of <code>mutate_at()</code> to divide two particular variables by 10 is demonstrated in the code below:</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a></a>data2 <span class="sc">%&gt;%</span> <span class="fu">mutate_at</span>(<span class="fu">c</span>(<span class="st">"Sepal.Length"</span>, <span class="st">"Sepal.Width"</span>), <span class="fu">funs</span>(<span class="at">mod =</span> .<span class="sc">/</span><span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Sepal.Length_mod
1          5.1         3.5          1.4         0.2             0.51
2          4.9         3.0          1.4         0.2             0.49
3          4.7         3.2          1.3         0.2             0.47
4          4.6         3.1          1.5         0.2             0.46
5          5.0         3.6          1.4         0.2             0.50
6          5.4         3.9          1.7         0.4             0.54
  Sepal.Width_mod
1            0.35
2            0.30
3            0.32
4            0.31
5            0.36
6            0.39</code></pre>
</div>
</div>
</section><section id="mutate_if" class="slide level2"><h2><code>mutate_if()</code></h2>
<ul>
<li><p>All variables that match a specific condition are modified by the <code>mutate_if()</code> function.</p></li>
<li><p>The <code>mutate_if()</code> function can be used to change any variables of type factor to type character, as shown in the code below.</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a></a>data <span class="ot">&lt;-</span> <span class="fu">head</span>(iris)</span>
<span id="cb57-2"><a></a><span class="fu">sapply</span>(data, class)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>Sepal.Length  Sepal.Width Petal.Length  Petal.Width      Species 
   "numeric"    "numeric"    "numeric"    "numeric"     "factor" </code></pre>
</div>
</div>
<ul>
<li>every factor variable can be converted to a character variable.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a></a>new_data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">mutate_if</span>(is.factor, as.character)</span>
<span id="cb59-2"><a></a><span class="fu">sapply</span>(new_data, class)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>Sepal.Length  Sepal.Width Petal.Length  Petal.Width      Species 
   "numeric"    "numeric"    "numeric"    "numeric"  "character" </code></pre>
</div>
</div>
</section><section class="slide level2"><ul>
<li>The <code>mutate_if()</code> method can be used to round any numeric variables to the nearest whole number using the following example code.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a></a>data <span class="ot">&lt;-</span> <span class="fu">head</span>(iris)</span>
<span id="cb61-2"><a></a>data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa</code></pre>
</div>
</div>
<ul>
<li>any numeric variables should be rounded to the nearest decimal place.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a></a>data <span class="sc">%&gt;%</span> <span class="fu">mutate_if</span>(is.numeric, round, <span class="at">digits =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1            5           4            1           0  setosa
2            5           3            1           0  setosa
3            5           3            1           0  setosa
4            5           3            2           0  setosa
5            5           4            1           0  setosa
6            5           4            2           0  setosa</code></pre>
</div>
</div>
</section><section id="use-across-inside-mutate-function" class="slide level2"><h2>Use <code>across()</code> inside <code>mutate()</code> function</h2>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a></a>iris <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb65-2"><a></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(Sepal.Length, Sepal.Width), round)) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">4</span>) <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 5
  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
         &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  
1            5           4          1.4         0.2 setosa 
2            5           3          1.4         0.2 setosa 
3            5           3          1.3         0.2 setosa 
4            5           3          1.5         0.2 setosa </code></pre>
</div>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a></a>iris <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span>  </span>
<span id="cb67-2"><a></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), round)) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">4</span>)<span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 5
  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
         &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  
1            5           4          1.4         0.2 setosa 
2            5           3          1.4         0.2 setosa 
3            5           3          1.3         0.2 setosa 
4            5           3          1.5         0.2 setosa </code></pre>
</div>
</div>
</section><section id="use-across-inside-mutate-function-1" class="slide level2"><h2>Use <code>across()</code> inside <code>mutate()</code> function</h2>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a></a>iris <span class="sc">%&gt;%</span>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb69-2"><a></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="dv">1</span><span class="sc">:</span>Sepal.Width, round)) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">4</span>) <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 5
  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
         &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  
1            5           4          1.4         0.2 setosa 
2            5           3          1.4         0.2 setosa 
3            5           3          1.3         0.2 setosa 
4            5           3          1.5         0.2 setosa </code></pre>
</div>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a></a>iris <span class="sc">%&gt;%</span>   <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb71-2"><a></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.double) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">c</span>(Petal.Length, Petal.Width), round)) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">4</span>) <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 5
  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
         &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  
1            5           4          1.4         0.2 setosa 
2            5           3          1.4         0.2 setosa 
3            5           3          1.3         0.2 setosa 
4            5           3          1.5         0.2 setosa </code></pre>
</div>
</div>
</section><section id="b-manipulating-cases" class="slide level2"><h2>b) Manipulating cases</h2>
<h4 id="filter-to-extract-cases">
<code>filter()</code>: To extract cases</h4>
<ul>
<li><p>The function <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code> is used to filter the dataset to return a subset of all rows that meet one or more specific conditions.</p></li>
<li><p><code>filter(dataframe, logical statement 1, logical statement 2, ...)</code></p></li>
</ul>
<div style="text-align:center">
<p><img src="img/filter().png" height="70%" width="70%"></p>
<p><img src="img/logic.helper.png" height="80%" width="80%"></p>
</div>
</section><section id="filtering-rows-based-on-a-numeric-variable" class="slide level2"><h2>Filtering rows based on a numeric variable</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a></a>msleep <span class="ot">&lt;-</span> ggplot2<span class="sc">::</span>msleep</span>
<span id="cb73-2"><a></a>msleep <span class="sc">%&gt;%</span> </span>
<span id="cb73-3"><a></a>  <span class="fu">select</span>(name, sleep_total) <span class="sc">%&gt;%</span> </span>
<span id="cb73-4"><a></a>  <span class="fu">filter</span>(sleep_total <span class="sc">&gt;</span> <span class="dv">18</span>) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
  name                 sleep_total
  &lt;chr&gt;                      &lt;dbl&gt;
1 Big brown bat               19.7
2 Thick-tailed opposum        19.4
3 Little brown bat            19.9
4 Giant armadillo             18.1</code></pre>
</div>
</div>
</div>
</div>
<ul>
<li>To select all animals with a total sleep time between 15 and 18 hours, use: <code>filter(sleep_total &gt;= 16, sleep_total &lt;= 18)</code>, but there is a slightly shorter way by using the between() function.</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a></a>msleep <span class="sc">%&gt;%</span> </span>
<span id="cb75-2"><a></a>  <span class="fu">select</span>(name, sleep_total) <span class="sc">%&gt;%</span> </span>
<span id="cb75-3"><a></a>  <span class="fu">filter</span>(<span class="fu">between</span>(sleep_total, <span class="dv">16</span>, <span class="dv">18</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
  name                   sleep_total
  &lt;chr&gt;                        &lt;dbl&gt;
1 Owl monkey                    17  
2 Long-nosed armadillo          17.4
3 North American Opossum        18  
4 Arctic ground squirrel        16.6</code></pre>
</div>
</div>
</div>
</div>
</section><section id="filtering-based-on-exact-character-variable-matches" class="slide level2"><h2>Filtering based on exact character variable matches</h2>
<ul>
<li>If you want to select a specific group of animals for instance you can use the <code>==</code> comparison operator:</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a></a>msleep <span class="sc">%&gt;%</span> </span>
<span id="cb77-2"><a></a>  <span class="fu">select</span>(order, name, sleep_total) <span class="sc">%&gt;%</span> </span>
<span id="cb77-3"><a></a>  <span class="fu">filter</span>(order <span class="sc">==</span> <span class="st">"Didelphimorphia"</span>) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  order           name                   sleep_total
  &lt;chr&gt;           &lt;chr&gt;                        &lt;dbl&gt;
1 Didelphimorphia North American Opossum        18  
2 Didelphimorphia Thick-tailed opposum          19.4</code></pre>
</div>
</div>
<ul>
<li>Similarly you can use the other operators:
<ul>
<li>
<code>filter(order != "Rodentia")</code> will select everything except the Rodentia rows.</li>
</ul>
</li>
</ul></section><section class="slide level2"><ul>
<li>If you want to select more than one animal you can use the <code>%in%</code> operator.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a></a>msleep <span class="sc">%&gt;%</span> </span>
<span id="cb79-2"><a></a>  <span class="fu">select</span>(order, name, sleep_total) <span class="sc">%&gt;%</span> </span>
<span id="cb79-3"><a></a>  <span class="fu">filter</span>(order <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Didelphimorphia"</span>, <span class="st">"Diprotodontia"</span>)) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  order           name                   sleep_total
  &lt;chr&gt;           &lt;chr&gt;                        &lt;dbl&gt;
1 Didelphimorphia North American Opossum        18  
2 Didelphimorphia Thick-tailed opposum          19.4
3 Diprotodontia   Phalanger                     13.7</code></pre>
</div>
</div>
<ul>
<li>The <code>%in%</code> operator used to deselect certain groups as well, using <code>!%in%</code>.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb81"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a></a>cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Rodentia"</span>, <span class="st">"Carnivora"</span>, <span class="st">"Primates"</span>)</span>
<span id="cb81-2"><a></a>msleep <span class="sc">%&gt;%</span> <span class="fu">select</span>(order, name, sleep_total) <span class="sc">%&gt;%</span> </span>
<span id="cb81-3"><a></a>  <span class="fu">filter</span>(<span class="sc">!</span>order <span class="sc">%in%</span> cols) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  order        name                       sleep_total
  &lt;chr&gt;        &lt;chr&gt;                            &lt;dbl&gt;
1 Soricomorpha Greater short-tailed shrew        14.9
2 Artiodactyla Cow                                4  
3 Pilosa       Three-toed sloth                  14.4</code></pre>
</div>
</div>
</section><section id="filtering-based-on-multiple-conditions" class="slide level2"><h2>Filtering based on multiple conditions</h2>
<ul>
<li>The above examples return rows based on a single condition, but the filter option also allows AND and OR style filters:</li>
</ul>
<ol type="1">
<li>
<code>filter(condition1, condition2)</code> will return rows where both conditions are met.</li>
<li>
<code>filter(condition1, !condition2)</code> will return all rows where condition one is true but condition 2 is not.</li>
<li>
<code>filter(condition1 | condition2)</code> will return rows where condition 1 and/or condition 2 is met.</li>
<li>
<code>filter(xor(condition1, condition2)</code> will return all rows where only one of the conditions is met, and not when both conditions are met.</li>
</ol>
<ul>
<li>Multiple AND, OR and NOT conditions can be combined. The sample code will return all rows with a bodywt above 100 and either have a sleep_total above 15 or are not part of the Carnivora order.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a></a>msleep <span class="sc">%&gt;%</span> </span>
<span id="cb83-2"><a></a>  <span class="fu">select</span>(name, order, sleep_total<span class="sc">:</span>bodywt) <span class="sc">%&gt;%</span> </span>
<span id="cb83-3"><a></a>  <span class="fu">filter</span>(bodywt <span class="sc">&gt;</span> <span class="dv">100</span>, (sleep_total <span class="sc">&gt;</span> <span class="dv">15</span> <span class="sc">|</span> order <span class="sc">!=</span> <span class="st">"Carnivora"</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="example-with-xor" class="slide level2"><h2>Example with <code>xor()</code>
</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb84"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a></a>msleep <span class="sc">%&gt;%</span></span>
<span id="cb84-2"><a></a>  <span class="fu">select</span>(name, bodywt<span class="sc">:</span>brainwt) <span class="sc">%&gt;%</span> </span>
<span id="cb84-3"><a></a>  <span class="fu">filter</span>(<span class="fu">xor</span>(bodywt <span class="sc">&gt;</span> <span class="dv">100</span>, brainwt <span class="sc">&gt;</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  name            bodywt brainwt
  &lt;chr&gt;            &lt;dbl&gt;   &lt;dbl&gt;
1 Cow               600    0.423
2 Horse             521    0.655
3 Donkey            187    0.419
4 Human              62    1.32 
5 Brazilian tapir   208.   0.169</code></pre>
</div>
</div>
</div>
</div>
<p><strong>Example with <code>!</code>:</strong></p>
<ul>
<li>The sample code will select all rows where <code>brainwt</code> is larger than 1, but <code>bodywt</code> does not exceed 100.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb86"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a></a>msleep <span class="sc">%&gt;%</span> </span>
<span id="cb86-2"><a></a>  <span class="fu">select</span>(name, sleep_total, brainwt, bodywt) <span class="sc">%&gt;%</span> </span>
<span id="cb86-3"><a></a>  <span class="fu">filter</span>(brainwt <span class="sc">&gt;</span> <span class="dv">1</span>, <span class="sc">!</span>bodywt <span class="sc">&gt;</span> <span class="dv">100</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 4
  name  sleep_total brainwt bodywt
  &lt;chr&gt;       &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;
1 Human           8    1.32     62</code></pre>
</div>
</div>
</section><section id="filtering-out-empty-rows" class="slide level2"><h2>Filtering out empty rows</h2>
<ul>
<li>To filter out empty rows, you negate the <code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code> function inside a filter: The sample code will remove any rows where the conservation is NA.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a></a>msleep <span class="sc">%&gt;%</span> </span>
<span id="cb88-2"><a></a>  <span class="fu">select</span>(name, conservation<span class="sc">:</span>sleep_cycle) <span class="sc">%&gt;%</span> </span>
<span id="cb88-3"><a></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(conservation))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="filtering-across-multiple-columns" class="slide level2"><h2>Filtering across multiple columns</h2>
<ul>
<li><p>How <code>dplyr</code> package filter across multiple columns in one go?</p></li>
<li><p><code>filter_all()</code>: will filter all columns</p></li>
<li><p><code>filter_if()</code>: filter columns based on a function.</p></li>
<li><p><code>filter_at()</code>: requires specify columns inside a <code>vars()</code> argument for which the filtering will be done.</p></li>
<li><p>In many cases you will need a <code>.</code> operator within the condition which refers to the values we are looking at.</p></li>
</ul></section><section id="filter_all" class="slide level2"><h2><code>filter_all()</code></h2>
<ul>
<li>
<p>Used to wrap the condition in any_vars().</p>
<ul>
<li>For example to find the string “Ca” across all columns,</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb89"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a></a>msleep <span class="sc">%&gt;%</span> </span>
<span id="cb89-2"><a></a>  <span class="fu">select</span>(name<span class="sc">:</span>order, sleep_total, <span class="sc">-</span>vore) <span class="sc">%&gt;%</span> </span>
<span id="cb89-3"><a></a>  <span class="fu">filter_all</span>(<span class="fu">any_vars</span>(<span class="fu">str_detect</span>(., <span class="at">pattern =</span> <span class="st">"Ca"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</li>
<li><p>The same can be done for numerical values: This code will retain any rows that has any value below 0.1:</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb90"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a></a>msleep <span class="sc">%&gt;%</span>  </span>
<span id="cb90-2"><a></a>  <span class="fu">select</span>(name, sleep_total<span class="sc">:</span>bodywt) <span class="sc">%&gt;%</span> </span>
<span id="cb90-3"><a></a>  <span class="fu">filter_all</span>(<span class="fu">any_vars</span>(. <span class="sc">&lt;</span> <span class="fl">0.1</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section class="slide level2"><ul>
<li>
<code>any_vars()</code> statement is equivalent to OR, and</li>
<li>
<code>all_vars()</code>is an equivalent for AND.</li>
</ul>
<p>The below code will retain any rows where all values are above 1.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb91"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a></a>msleep <span class="sc">%&gt;%</span>  </span>
<span id="cb91-2"><a></a>  <span class="fu">select</span>(name, sleep_total<span class="sc">:</span>bodywt, <span class="sc">-</span>awake) <span class="sc">%&gt;%</span> </span>
<span id="cb91-3"><a></a>  <span class="fu">filter_all</span>(<span class="fu">all_vars</span>(. <span class="sc">&gt;</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong><code>filter_if()</code></strong></p>
<ul>
<li><p>to find out all data rows where we NA in the first few columns use <code>filter_all(any_vars(is.na(.)))</code></p></li>
<li><p>Using <code>filter_if()</code> I can filter on character variables.</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb92"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a></a>msleep <span class="sc">%&gt;%</span> </span>
<span id="cb92-2"><a></a>  <span class="fu">select</span>(name<span class="sc">:</span>order, sleep_total<span class="sc">:</span>sleep_rem) <span class="sc">%&gt;%</span> </span>
<span id="cb92-3"><a></a>  <span class="fu">filter_if</span>(is.character, <span class="fu">any_vars</span>(<span class="fu">is.na</span>(.)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="filter_at" class="slide level2"><h2><code>filter_at()</code></h2>
<ul>
<li><p>One of the more powerful functions is <code>filter_at()</code>: it does not filter all columns, nor does it need you to specify the type of column, you can just select columns to which the change should happen via the <code>vars()</code> argument.</p></li>
<li><p>Use <code>all_vars()</code> if all columns need to return TRUE, or <code>any_vars()</code> in case just one variable needs to return TRUE.</p></li>
<li><p>Example: refer to columns by their name:</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a></a>msleep <span class="sc">%&gt;%</span> </span>
<span id="cb93-2"><a></a>  <span class="fu">select</span>(name, sleep_total<span class="sc">:</span>sleep_rem, brainwt<span class="sc">:</span>bodywt) <span class="sc">%&gt;%</span> </span>
<span id="cb93-3"><a></a>  <span class="fu">filter_at</span>(<span class="fu">vars</span>(sleep_total, sleep_rem), <span class="fu">all_vars</span>(.<span class="sc">&gt;</span><span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li>Example: using another select option:</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb94"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a></a>msleep <span class="sc">%&gt;%</span> </span>
<span id="cb94-2"><a></a>  <span class="fu">select</span>(name, sleep_total<span class="sc">:</span>sleep_rem, brainwt<span class="sc">:</span>bodywt) <span class="sc">%&gt;%</span> </span>
<span id="cb94-3"><a></a>  <span class="fu">filter_at</span>(<span class="fu">vars</span>(<span class="fu">contains</span>(<span class="st">"sleep"</span>)), <span class="fu">all_vars</span>(.<span class="sc">&gt;</span><span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="sort-rows-with-arrange" class="slide level2"><h2>Sort rows with <code>arrange</code>
</h2>
<p>Re-order rows by a particular column, by default in ascending order</p>
<p>Use <code>desc()</code> for descending order.</p>
<p><code>arrange(data, variable1, desc(variable2), ...)</code></p>
<p>Example: 1. Let us use the following code to create a scrambled version of the airquality dataset</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb95"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a></a>air_mess <span class="ot">&lt;-</span> <span class="fu">sample_frac</span>(airquality, <span class="dv">1</span>)</span>
<span id="cb95-2"><a></a><span class="fu">head</span>(air_mess)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  Ozone Solar.R Wind Temp Month Day
1    30     322 11.5   68     5  19
2    NA     220  8.6   85     6   5
3    76     203  9.7   97     8  28
4   122     255  4.0   89     8   7
5    NA      91  4.6   76     6  23
6     7      49 10.3   69     9  24</code></pre>
</div>
</div>
</section><section id="sort-rows-with-arrange-1" class="slide level2"><h2>Sort rows with <code>arrange()</code>
</h2>
<p>Example: 2. Now let us arrange the data frame back into chronological order, sorting by Month then Day</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb97"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a></a>air_chron <span class="ot">&lt;-</span> <span class="fu">arrange</span>(air_mess, Month, Day)</span>
<span id="cb97-2"><a></a><span class="fu">head</span>(air_chron)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  Ozone Solar.R Wind Temp Month Day
1    41     190  7.4   67     5   1
2    36     118  8.0   72     5   2
3    12     149 12.6   74     5   3
4    18     313 11.5   62     5   4
5    NA      NA 14.3   56     5   5
6    28      NA 14.9   66     5   6</code></pre>
</div>
</div>
<p>.comment[Try : <code>arrange(air_mess, Day, Month)</code> and see the difference.]</p>
</section><section id="pipe-perator" class="slide level2"><h2>Pipe perator (<code>%&gt;%</code>)</h2>
<ul>
<li><p>Pipes in R look like <code>%&gt;%</code> and strings together commands to be performed sequentially</p></li>
<li><p>The pipe passes the data frame output that results from the function right before the pipe to input it as the first argument of the function right after the pipe.</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb99"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a></a><span class="fu">third</span>(<span class="fu">second</span>(<span class="fu">first</span>(x)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li><p>This nesting is not a natural way to think about a sequence of operations.</p></li>
<li><p>The <code>%&gt;%</code> operator allows you to string operations in a left-to-right fashion.</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb100"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a></a><span class="fu">first</span>(x) <span class="sc">%&gt;%</span></span>
<span id="cb100-2"><a></a>second <span class="sc">%&gt;%</span> third</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="advantages-of-pipe-oprator" class="slide level2"><h2>Advantages of Pipe oprator</h2>
<ul>
<li>Pipes used to reduce multiple steps, that can be hard to keep track of.</li>
<li><strong>less redundant code</strong></li>
<li>Easy to read and write because functions are executed in order
<ul>
<li>Difficult to read if too many functions are nested</li>
</ul>
</li>
<li><strong>Look at the three syntax</strong></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb101"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a></a>data1<span class="ot">&lt;-</span><span class="fu">filter</span>(sampledata, Age <span class="sc">&gt;</span> <span class="dv">15</span>) <span class="co">#&lt;&lt;</span></span>
<span id="cb101-2"><a></a>data2<span class="ot">&lt;-</span><span class="fu">select</span>(data1, Sex, Weight1, Age) <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb102"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a></a>non_piped <span class="ot">&lt;-</span><span class="fu">select</span>(<span class="fu">filter</span>(mydata, Age<span class="sc">&gt;</span><span class="dv">15</span>), Sex, Weight1, Age) <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb103"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a></a>pipeddata<span class="ot">&lt;-</span>mydata <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Age <span class="sc">&gt;</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(Sex, Weight1, Height1, Age)<span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="group_by-and-summarise" class="slide level2"><h2>
<code>group_by()</code> and <code>summarise()</code>
</h2>
<ul>
<li><p>The <code>dplyr</code> verbs become especially powerful when they are are combined using the pipe operator <code>%&gt;%</code>.</p></li>
<li><p>The following <code>dplyr</code> functions allow us to split our data frame into groups on which we can perform operations individually</p></li>
<li><p><strong><code>group_by()</code>:</strong> group data frame by a factor for downstream operations (usually summarise)</p></li>
<li><p><strong><code>summarise()</code>:</strong> summarise values in a data frame or in groups within the data frame with aggregation functions (e.g.&nbsp;<code><a href="https://rdrr.io/r/base/Extremes.html">min()</a></code>, <code><a href="https://rdrr.io/r/base/Extremes.html">max()</a></code>, <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code>, etc…)</p></li>
</ul></section><section id="dplyr---split-apply-combine" class="slide level2"><h2>
<code>dplyr</code> - Split-Apply-Combine</h2>
<p>The <code>group_by</code> function is key to the Split-Apply-Combine strategy</p>
<div style="text-align:center">
<p><img src="img/split-apply-combine.png" height="80%" width="90%"></p>
</div>
</section><section id="the-summarize-function" class="slide level2"><h2>The <code>summarize()</code> function</h2>
<ul>
<li><p>The <code>summarize()</code> function is used in the R program to summarize the data frame into just one value or vector.</p></li>
<li><p>This summarization is done through grouping observations by using categorical values at first, using the <code>group_by()</code> function.</p></li>
<li><p>The <code>summarize()</code> function offers the summary that is based on the action done on grouped or ungrouped data.</p></li>
</ul></section><section id="summarize-grouped-data" class="slide level2"><h2>Summarize grouped data</h2>
<ul>
<li><p>The operations that can be performed on grouped data are <code>average</code>, <code>factor</code>, <code>count</code>, <code>mean</code>, etc.</p></li>
<li><p>Example: we are interested in the mean temperature and standard deviation within each month of the <strong>airquality dataset</strong></p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb104"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a></a>month_sum <span class="ot">&lt;-</span> airquality <span class="sc">%&gt;%</span></span>
<span id="cb104-2"><a></a>      <span class="fu">group_by</span>(Month) <span class="sc">%&gt;%</span></span>
<span id="cb104-3"><a></a>      <span class="fu">summarise</span>(<span class="at">mean_temp =</span> <span class="fu">mean</span>(Temp),</span>
<span id="cb104-4"><a></a>                <span class="at">sd_temp =</span> <span class="fu">sd</span>(Temp))</span>
<span id="cb104-5"><a></a>month_sum</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  Month mean_temp sd_temp
  &lt;int&gt;     &lt;dbl&gt;   &lt;dbl&gt;
1     5      65.5    6.85
2     6      79.1    6.60
3     7      83.9    4.32
4     8      84.0    6.59
5     9      76.9    8.36</code></pre>
</div>
</div>
</section><section id="summarize-ungrouped-data" class="slide level2"><h2>Summarize ungrouped data</h2>
<ul>
<li>We can also summarize ungrouped data. This can be done by using three functions.</li>
<li><code>summarize_all()</code></li>
<li><code>summarize_at()</code></li>
<li><code>summazrize_if()</code></li>
</ul>
<h4 id="summarize_all">1. summarize_all()</h4>
<ul>
<li>This function summarizes all the columns of data based on the action which is to be performed.</li>
</ul>
<pre><code>summarize_all(action)</code></pre>
<ul>
<li>example The code <code>airquality %&gt;% summarize_all(mean)</code> will show the mean of all columns.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb107"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a></a><span class="co"># Caculating mean value.</span></span>
<span id="cb107-2"><a></a>airquality <span class="sc">%&gt;%</span> <span class="fu">summarize_all</span>(mean, <span class="at">na.rm=</span>T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>     Ozone  Solar.R     Wind     Temp    Month      Day
1 42.12931 185.9315 9.957516 77.88235 6.993464 15.80392</code></pre>
</div>
</div>
</section><section id="summarize_at" class="slide level2"><h2>2. summarize_at()</h2>
<ul>
<li>It performs the action on the specific column and generates the summary based on that action.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb109"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a></a><span class="fu">summarize_at</span>(vector_of_columns, action)</span>
<span id="cb109-2"><a></a></span>
<span id="cb109-3"><a></a><span class="sc">-</span>   <span class="st">`</span><span class="at">vector_of_columns</span><span class="st">`</span><span class="sc">:</span> The list of column names or character vector of column names.</span>
<span id="cb109-4"><a></a></span>
<span id="cb109-5"><a></a><span class="sc">-</span>   The <span class="st">`</span><span class="at">airquality %&gt;% group_by(Month) %&gt;% summarize_at(c("Wind","Temp"),mean)</span><span class="st">`</span> will show the mean of the <span class="st">`</span><span class="at">'Wind'</span><span class="st">`</span> and <span class="st">`</span><span class="at">'Temp'</span><span class="st">`</span> observations <span class="cf">in</span> the result, grouping with <span class="st">`</span><span class="at">Month</span><span class="st">`</span>.</span>
<span id="cb109-6"><a></a></span>
<span id="cb109-7"><a></a>airquality <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Month) <span class="sc">%&gt;%</span></span>
<span id="cb109-8"><a></a><span class="fu">summarize_at</span>(<span class="fu">c</span>(<span class="st">"Wind"</span>,<span class="st">"Temp"</span>),mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="summarize_if" class="slide level2"><h2>3. summarize_if()</h2>
<ul>
<li>In this function, we specify a condition and the summary will be generated if the condition is satisfied.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb110"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a></a><span class="fu">summarize_if</span>(.predicate, .action)</span>
<span id="cb110-2"><a></a></span>
<span id="cb110-3"><a></a><span class="sc">-</span>   In the code snippet below, we use the <span class="st">`</span><span class="at">predicate</span><span class="st">`</span> <span class="cf">function</span> <span class="st">`</span><span class="at">is.numeric</span><span class="st">`</span> and <span class="st">`</span><span class="at">mean</span><span class="st">`</span> as an action.</span>
<span id="cb110-4"><a></a></span>
<span id="cb110-5"><a></a>z<span class="ot">&lt;-</span> <span class="fu">head</span>(data)</span>
<span id="cb110-6"><a></a>airquality <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Month) <span class="sc">%&gt;%</span></span>
<span id="cb110-7"><a></a><span class="fu">summarize_if</span>(is.numeric, mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section class="slide level2"><div style="text-align:center">
<p><img src="img/summarise.png" height="45%" width="65%"></p>
</div>
</section><section id="recoding-variables" class="slide level2"><h2>Recoding Variables</h2>
<ul>
<li>use <code>recode()</code> inside a <code>mutate()</code> statement.</li>
</ul>
<p>Example of Recoding</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb111"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a></a>data_diet <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">Diet =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"B"</span>), <span class="at">times =</span> <span class="dv">4</span>), </span>
<span id="cb111-2"><a></a>                    <span class="at">Gender =</span> <span class="fu">c</span>(<span class="st">"Male"</span>,<span class="st">"m"</span>,<span class="st">"Other"</span>,<span class="st">"F"</span>,<span class="st">"Female"</span>,<span class="st">"M"</span>,</span>
<span id="cb111-3"><a></a>                               <span class="st">"f"</span>,<span class="st">"O"</span>,<span class="st">"Man"</span>,<span class="st">"f"</span>,<span class="st">"F"</span>,<span class="st">"O"</span>), </span>
<span id="cb111-4"><a></a>                    <span class="at">Weight_start =</span> <span class="fu">sample</span>(<span class="dv">100</span><span class="sc">:</span><span class="dv">250</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb111-5"><a></a>                    <span class="at">Weight_change =</span> <span class="fu">sample</span>(<span class="sc">-</span><span class="dv">10</span><span class="sc">:</span><span class="dv">20</span>, <span class="at">size =</span> <span class="dv">12</span>))</span>
<span id="cb111-6"><a></a><span class="fu">head</span>(data_diet)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  Diet  Gender Weight_start Weight_change
  &lt;chr&gt; &lt;chr&gt;         &lt;int&gt;         &lt;int&gt;
1 A     Male            241            -2
2 B     m               113            17
3 B     Other           134             4
4 A     F               188             5
5 B     Female          161            10
6 B     M               249            12</code></pre>
</div>
</div>
<ul>
<li>Say we have some data about samples in a diet study but this needs lots of recoding.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb113"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a></a>data_diet <span class="sc">%&gt;%</span></span>
<span id="cb113-2"><a></a>  <span class="fu">count</span>(Gender)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 2
  Gender     n
  &lt;chr&gt;  &lt;int&gt;
1 F          2
2 Female     1
3 M          1
4 Male       1
5 Man        1
6 O          2
7 Other      1
8 f          2
9 m          1</code></pre>
</div>
</div>
</section><section id="dplyr-can-help" class="slide level2"><h2>
<code>dplyr</code> can help!</h2>
<p>Using Excel to find all of the different ways <code>gender</code> has been coded, could be hectic!</p>
<p>In <code>dplyr</code> you can use the <code>recode</code> function (need <code>mutate</code> here too!):</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb115"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a></a><span class="co"># General Format - this is not code!</span></span>
<span id="cb115-2"><a></a>{data_input} <span class="sc">%&gt;%</span></span>
<span id="cb115-3"><a></a>  <span class="fu">mutate</span>({variable_to_fix} <span class="ot">=</span> <span class="fu">recode</span>({Variable_fixing}, {old_value} <span class="ot">=</span> {new_value},</span>
<span id="cb115-4"><a></a>                                    {another_old_value} <span class="ot">=</span> {new_value}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb116"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a></a>data_diet <span class="sc">%&gt;%</span> </span>
<span id="cb116-2"><a></a>  <span class="fu">mutate</span>(<span class="at">Gender =</span> <span class="fu">recode</span>(Gender, <span class="at">M =</span> <span class="st">"Male"</span>, <span class="at">m =</span> <span class="st">"Male"</span>, <span class="at">Man =</span> <span class="st">"Male"</span>,</span>
<span id="cb116-3"><a></a>                                 <span class="at">O =</span> <span class="st">"Other"</span>, <span class="at">f =</span> <span class="st">"Female"</span>,<span class="at">F =</span> <span class="st">"Female"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb116-4"><a></a>  <span class="fu">count</span>(Gender, Diet)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="recode" class="slide level2"><h2><code>recode()</code></h2>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb117"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a></a>data_diet <span class="sc">%&gt;%</span> </span>
<span id="cb117-2"><a></a>  <span class="fu">mutate</span>(<span class="at">Gender =</span> <span class="fu">recode</span>(Gender, <span class="at">M =</span> <span class="st">"Male"</span>, <span class="at">m =</span> <span class="st">"Male"</span>, <span class="at">Man =</span> <span class="st">"Male"</span>,</span>
<span id="cb117-3"><a></a>                                 <span class="at">O =</span> <span class="st">"Other"</span>,<span class="at">f =</span> <span class="st">"Female"</span>,<span class="at">F =</span> <span class="st">"Female"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb117-4"><a></a>  <span class="fu">count</span>(Gender, Diet)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  Gender Diet      n
  &lt;chr&gt;  &lt;chr&gt; &lt;int&gt;
1 Female A         3
2 Female B         2
3 Male   A         1
4 Male   B         3
5 Other  B         3</code></pre>
</div>
</div>
</section><section id="or-you-can-use-case_when" class="slide level2"><h2>Or you can use <code>case_when()</code>
</h2>
<p>The <code>case_when()</code> function of <code>dplyr</code> can help us to do this as well.</p>
<div style="text-align:center">
<p><img src="img/case_when.png" height="25%" width="40%"></p>
</div>
<ul>
<li>Note that automatically values not reassigned explicitly by <code>case_when()</code> will be <code>NA</code> unless otherwise specified.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb119"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a></a>data_diet <span class="sc">%&gt;%</span> </span>
<span id="cb119-2"><a></a>  <span class="fu">mutate</span>(<span class="at">Gender =</span> <span class="fu">case_when</span>(Gender <span class="sc">==</span> <span class="st">"M"</span> <span class="sc">~</span> <span class="st">"Male"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
   Diet  Gender Weight_start Weight_change
   &lt;chr&gt; &lt;chr&gt;         &lt;int&gt;         &lt;int&gt;
 1 A     &lt;NA&gt;            241            -2
 2 B     &lt;NA&gt;            113            17
 3 B     &lt;NA&gt;            134             4
 4 A     &lt;NA&gt;            188             5
 5 B     &lt;NA&gt;            161            10
 6 B     Male            249            12
 7 A     &lt;NA&gt;            169            -3
 8 B     &lt;NA&gt;            222           -10
 9 B     &lt;NA&gt;            211             8
10 A     &lt;NA&gt;            245             9
11 B     &lt;NA&gt;            115            -9
12 B     &lt;NA&gt;            179            -1</code></pre>
</div>
</div>
</section><section id="use-of-case_when-without-automatic-na" class="slide level2"><h2>Use of <code>case_when()</code> without automatic <code>NA</code>
</h2>
<div style="text-align:center">
<p><img src="img/case_when1.png" height="30%" width="60%"></p>
</div>
<ul>
<li>Here we use the original values of <code>Gender</code> to replace all values of <code>Gender</code> that do not meet the condition <code>== "M"</code>.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb121"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a></a>data_diet <span class="sc">%&gt;%</span> </span>
<span id="cb121-2"><a></a>  <span class="fu">mutate</span>(<span class="at">Gender =</span> <span class="fu">case_when</span>(Gender <span class="sc">==</span> <span class="st">"M"</span> <span class="sc">~</span> <span class="st">"Male"</span>, <span class="cn">TRUE</span> <span class="sc">~</span> Gender))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
   Diet  Gender Weight_start Weight_change
   &lt;chr&gt; &lt;chr&gt;         &lt;int&gt;         &lt;int&gt;
 1 A     Male            241            -2
 2 B     m               113            17
 3 B     Other           134             4
 4 A     F               188             5
 5 B     Female          161            10
 6 B     Male            249            12
 7 A     f               169            -3
 8 B     O               222           -10
 9 B     Man             211             8
10 A     f               245             9
11 B     F               115            -9
12 B     O               179            -1</code></pre>
</div>
</div>
</section><section id="more-complicated-case_when" class="slide level2"><h2>More complicated case_when()</h2>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb123"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a></a>data_diet <span class="sc">%&gt;%</span> </span>
<span id="cb123-2"><a></a>  <span class="fu">mutate</span>(<span class="at">Gender =</span> <span class="fu">case_when</span>(</span>
<span id="cb123-3"><a></a>    Gender <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"M"</span>, <span class="st">"male"</span>, <span class="st">"Man"</span>, <span class="st">"m"</span>, <span class="st">"Male"</span>) <span class="sc">~</span> <span class="st">"Male"</span>,</span>
<span id="cb123-4"><a></a>    Gender <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"F"</span>, <span class="st">"Female"</span>, <span class="st">"f"</span>, <span class="st">"female"</span>) <span class="sc">~</span> <span class="st">"Female"</span>,</span>
<span id="cb123-5"><a></a>    Gender <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"O"</span>, <span class="st">"Other"</span>) <span class="sc">~</span> <span class="st">"Other"</span>)) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  Diet  Gender Weight_start Weight_change
  &lt;chr&gt; &lt;chr&gt;         &lt;int&gt;         &lt;int&gt;
1 A     Male            241            -2
2 B     Male            113            17
3 B     Other           134             4
4 A     Female          188             5
5 B     Female          161            10
6 B     Male            249            12</code></pre>
</div>
</div>
</section><section id="another-reason-for-case_when" class="slide level2"><h2>Another reason for <code>case_when()</code>
</h2>
<p><code>case_when</code> can do very sophisticated comparisons</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb125"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a></a>data_diet1 <span class="ot">&lt;-</span>data_diet <span class="sc">%&gt;%</span> </span>
<span id="cb125-2"><a></a>      <span class="fu">mutate</span>(<span class="at">Effect =</span> <span class="fu">case_when</span>(Weight_change <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"Increase"</span>,</span>
<span id="cb125-3"><a></a>                                Weight_change <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"Same"</span>,</span>
<span id="cb125-4"><a></a>                                Weight_change <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"Decrease"</span>))</span>
<span id="cb125-5"><a></a><span class="fu">head</span>(data_diet)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  Diet  Gender Weight_start Weight_change
  &lt;chr&gt; &lt;chr&gt;         &lt;int&gt;         &lt;int&gt;
1 A     Male            241            -2
2 B     m               113            17
3 B     Other           134             4
4 A     F               188             5
5 B     Female          161            10
6 B     M               249            12</code></pre>
</div>
</div>
</section><section class="slide level2"><div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb127"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a></a>data_diet <span class="sc">%&gt;%</span> </span>
<span id="cb127-2"><a></a>  <span class="fu">count</span>(Diet, Effect)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb128"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb128-2"><a></a>data_diet1 <span class="sc">%&gt;%</span> <span class="fu">count</span>(Diet, Effect)<span class="sc">%&gt;%</span></span>
<span id="cb128-3"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Effect,<span class="at">y =</span> n, <span class="at">fill =</span> Diet)) <span class="sc">+</span> </span>
<span id="cb128-4"><a></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="fu">position_dodge</span>()) <span class="sc">+</span></span>
<span id="cb128-5"><a></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Individuals"</span>, <span class="at">title =</span> <span class="st">"Effect of diet A &amp; B on participants"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<img data-src="datamanagment_files/figure-revealjs/unnamed-chunk-100-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"></section><section id="creating-new-discrete-column-with-two-levels" class="slide level2"><h2>Creating new discrete column with <code>two levels</code>
</h2>
<ul>
<li>The <code><a href="https://rdrr.io/r/base/ifelse.html">ifelse()</a></code> statement can be used to turn a numeric column into a discrete one.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb129"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a></a>data_diet <span class="sc">%&gt;%</span></span>
<span id="cb129-2"><a></a>  <span class="fu">mutate</span>(<span class="at">Temp_cat =</span> <span class="fu">ifelse</span>(Weight_change <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">"Increased"</span>, <span class="st">"decreased"</span>)) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  Diet  Gender Weight_start Weight_change Temp_cat 
  &lt;chr&gt; &lt;chr&gt;         &lt;int&gt;         &lt;int&gt; &lt;chr&gt;    
1 A     Male            241            -2 decreased
2 B     m               113            17 Increased
3 B     Other           134             4 Increased
4 A     F               188             5 Increased
5 B     Female          161            10 Increased
6 B     M               249            12 Increased</code></pre>
</div>
</div>
</section><section id="working-with-strings-by-stringr-package" class="slide level2"><h2>Working with strings by <code>stringr</code> package</h2>
<p>The <code>stringr</code> package:</p>
<ul>
<li>Modifying or finding <strong>part</strong> or all of a character string</li>
<li>We will not cover <code>grep</code> or <code>gsub</code> - base R functions
<ul>
<li>are used on forums for answers</li>
</ul>
</li>
<li>Almost all functions start with <code>str_*</code>
</li>
</ul></section><section id="str_detect" class="slide level2"><h2><code>str_detect()</code></h2>
<ul>
<li><p><code>str_detect</code>, and <code>str_replace</code> search for matches to argument pattern within each element of a <strong>character vector</strong> (not data frame or tibble!).</p></li>
<li><p><code>str_detect</code> - returns <code>TRUE</code> if <code>pattern</code> is found</p></li>
<li><p><code>str_replace</code> - replaces <code>pattern</code> with <code>replacement</code></p></li>
</ul></section><section class="slide level2"><ul>
<li>The <code>string</code> argument specifies what to check<br>
</li>
<li>The <code>pattern</code> argument specifies what to check for</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb131"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a></a><span class="fu">library</span>(stringr)</span>
<span id="cb131-2"><a></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"cat"</span>, <span class="st">"dog"</span>, <span class="st">"mouse"</span>)</span>
<span id="cb131-3"><a></a><span class="fu">str_detect</span>(<span class="at">string =</span> x, <span class="at">pattern =</span> <span class="st">"d"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE FALSE</code></pre>
</div>
</div>
</section><section id="str_replace" class="slide level2"><h2><code>str_replace()</code></h2>
<ul>
<li>The <code>replacement</code> argument specifies what to replace the pattern with<br>
</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb133"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"cat"</span>, <span class="st">"dog"</span>, <span class="st">"mouse"</span>)</span>
<span id="cb133-2"><a></a><span class="fu">str_replace</span>(<span class="at">string =</span> x, <span class="at">pattern =</span> <span class="st">"d"</span>, <span class="at">replacement =</span> <span class="st">"D"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] "cat"   "Dog"   "mouse"</code></pre>
</div>
</div>
</section><section id="filter-and-stringr-functions" class="slide level2"><h2>
<code>filter</code> and <code>stringr</code> functions</h2>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb135"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a></a><span class="fu">head</span>(data_diet,<span class="at">n =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
  Diet  Gender Weight_start Weight_change
  &lt;chr&gt; &lt;chr&gt;         &lt;int&gt;         &lt;int&gt;
1 A     Male            241            -2
2 B     m               113            17
3 B     Other           134             4
4 A     F               188             5</code></pre>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb137"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a></a>data_diet <span class="sc">%&gt;%</span> </span>
<span id="cb137-2"><a></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(<span class="at">string =</span> Gender,</span>
<span id="cb137-3"><a></a>                    <span class="at">pattern =</span> <span class="st">"M"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
  Diet  Gender Weight_start Weight_change
  &lt;chr&gt; &lt;chr&gt;         &lt;int&gt;         &lt;int&gt;
1 A     Male            241            -2
2 B     M               249            12
3 B     Man             211             8</code></pre>
</div>
</div>
</section><section id="case_when-improved-with-stringr" class="slide level2"><h2>
<code>case_when()</code> improved with <code>stringr</code>
</h2>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb139"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a></a>data_diet <span class="sc">%&gt;%</span> </span>
<span id="cb139-2"><a></a>  <span class="fu">mutate</span>(<span class="at">Gender =</span> <span class="fu">case_when</span>(</span>
<span id="cb139-3"><a></a>    Gender <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"M"</span>, <span class="st">"male"</span>, <span class="st">"Man"</span>, <span class="st">"m"</span>, <span class="st">"Male"</span>) <span class="sc">~</span> <span class="st">"Male"</span>,</span>
<span id="cb139-4"><a></a>    Gender <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"F"</span>, <span class="st">"Female"</span>, <span class="st">"f"</span>, <span class="st">"female"</span>)<span class="sc">~</span> <span class="st">"Female"</span>,</span>
<span id="cb139-5"><a></a>    Gender <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"O"</span>, <span class="st">"Other"</span>) <span class="sc">~</span> <span class="st">"Other"</span>)) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  Diet  Gender Weight_start Weight_change
  &lt;chr&gt; &lt;chr&gt;         &lt;int&gt;         &lt;int&gt;
1 A     Male            241            -2
2 B     Male            113            17
3 B     Other           134             4
4 A     Female          188             5
5 B     Female          161            10
6 B     Male            249            12</code></pre>
</div>
</div>
</section><section id="case_when-improved-with-stringr-1" class="slide level2"><h2>
<code>case_when()</code> improved with <code>stringr</code>
</h2>
<ul>
<li><p><code>^</code> indicates the beginning of a character string</p></li>
<li><p><code>$</code> indicates the end</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb141"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a></a>data_diet <span class="sc">%&gt;%</span> </span>
<span id="cb141-2"><a></a>  <span class="fu">mutate</span>(<span class="at">Gender =</span> <span class="fu">case_when</span>(</span>
<span id="cb141-3"><a></a>    <span class="fu">str_detect</span>(<span class="at">string =</span> Gender, <span class="at">pattern =</span> <span class="st">"^m|^M"</span>) <span class="sc">~</span> <span class="st">"Male"</span>,</span>
<span id="cb141-4"><a></a>    <span class="fu">str_detect</span>(<span class="at">string =</span> Gender, <span class="at">pattern =</span> <span class="st">"^f|^F"</span>) <span class="sc">~</span> <span class="st">"Female"</span>,</span>
<span id="cb141-5"><a></a>    <span class="fu">str_detect</span>(<span class="at">string =</span> Gender, <span class="at">pattern =</span> <span class="st">"^o|^O"</span>) <span class="sc">~</span> <span class="st">"Other"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb141-6"><a></a>  <span class="fu">count</span>(Gender)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  Gender     n
  &lt;chr&gt;  &lt;int&gt;
1 Female     5
2 Male       4
3 Other      3</code></pre>
</div>
</div>
</section><section id="data-mergining" class="slide level2"><h2>Data mergining</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li><strong>The 4 mutating join verbs:</strong></li>
<li><code>left_join()</code></li>
<li><code>right_join()</code></li>
<li><code>inner_join()</code></li>
<li><code>full_join()</code></li>
</ul>
</div><div class="column" style="width:50%;">
<ul>
<li><p><strong>The 2 binding join verbs:</strong></p></li>
<li><p><code>bind_rows()</code></p></li>
<li><p><code>bind_cols()</code></p></li>
</ul>
</div>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li><strong>The 2 filtering join verbs:</strong></li>
<li><code>semi_join()</code></li>
<li><code>anti_join()</code></li>
</ul>
</div><div class="column" style="width:50%;">
<ul>
<li><strong>The 3 set operations:</strong></li>
<li><code><a href="https://rdrr.io/r/base/sets.html">intersect()</a></code></li>
<li><code><a href="https://rdrr.io/r/base/sets.html">union()</a></code></li>
<li><code><a href="https://rdrr.io/r/base/sets.html">setdiff()</a></code></li>
</ul>
</div>
</div>
</section><section class="slide level2"><ul>
<li><p>All the joins have this basic syntax: ****_join(x, y, by = NULL, suffix = c(“.x”, “.y”)</p></li>
<li><p><code>x =</code> the first (left) table</p></li>
<li><p><code>y =</code> the second (right) table</p></li>
<li><p><code>by =</code> what columns to match on. If you leave this blank, it will match on all columns with the same names in the two tables.</p></li>
<li><p><code>suffix =</code> if columns have the same name in the two tables, but you aren’t joining by them, they get a suffix to make them unambiguous.</p></li>
<li><p>This defaults to “.x” and “.y”, but you can change it to something more meaningful.</p></li>
</ul></section><section class="slide level2"><ul>
<li>First, we’ll create two small data tables.</li>
<li>
<code>subject</code> has id, sex and age for subjects 1-5.</li>
<li>Age and sex are missing for subject 3.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb143"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a></a>subject <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">id =</span> <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">5</span>),</span>
<span id="cb143-2"><a></a>  <span class="at">sex =</span> <span class="fu">c</span>(<span class="st">"m"</span>, <span class="st">"m"</span>, <span class="cn">NA</span>, <span class="st">"f"</span>, <span class="st">"f"</span>),</span>
<span id="cb143-3"><a></a>  <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">19</span>, <span class="dv">22</span>, <span class="cn">NA</span>, <span class="dv">19</span>, <span class="dv">18</span>))</span>
<span id="cb143-4"><a></a>subject</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li>
<code>exp</code> has subject id and the score from an experiment. Some subjects are missing, some completed twice, and some are not in the subject table.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb144"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a></a>exp <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb144-2"><a></a>  <span class="at">id =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">7</span>),</span>
<span id="cb144-3"><a></a>  <span class="at">score =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">18</span>, <span class="dv">21</span>, <span class="dv">23</span>, <span class="dv">9</span>, <span class="dv">11</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">3</span>))</span>
<span id="cb144-4"><a></a>exp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="left_join" class="slide level2"><h2>left_join()</h2>
<ul>
<li>A <code>left_join</code> keeps all the data from the first (left) table and joins anything that matches from the second (right) table.</li>
<li>If the right table has more than one match for a row in the right table, there will be more than one row in the joined table (see ids 4 and 5).</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>left_joint()</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb145"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a></a><span class="fu">left_join</span>(subject, exp, <span class="at">by =</span> <span class="st">"id"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div style="text-align:center">
<p><img src="img/leftjoin.png" height="80%" width="80%"></p>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>The order of the <code>exp</code> and <code>subject</code> tables is different.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb146"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a></a><span class="fu">left_join</span>(exp, subject, <span class="at">by =</span> <span class="st">"id"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div style="text-align:center">
<p><img src="img/leftjoin1.png" height="80%" width="80%"></p>
</div>
</div>
</div>
</section><section id="right_join" class="slide level2"><h2>right_join()</h2>
<ul>
<li>A <code>right_join</code> keeps all the data from the second (right) table and joins anything that matches from the first (left) table.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb147"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a></a><span class="fu">right_join</span>(subject, exp, <span class="at">by =</span> <span class="st">"id"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div style="text-align:center">
<p><img src="img/rightjoin.png" height="25%" width="40%"></p>
</div>
<ul>
<li>This table has the same information as <code>left_join(exp, subject, by = "id")</code>, but the columns are in a different order (left table, then right table).</li>
</ul></section><section id="inner_join" class="slide level2"><h2>inner_join()</h2>
<ul>
<li>An <code>inner_join</code> returns all the rows that have a match in the other table.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb148"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a></a><span class="fu">inner_join</span>(subject, exp, <span class="at">by =</span> <span class="st">"id"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div style="text-align:center">
<p><img src="img/innerjoin.png" height="25%" width="40%"></p>
</div>
</section><section id="full_join" class="slide level2"><h2>full_join()</h2>
<ul>
<li>A <code>full_join</code> lets you join up rows in two tables while keeping all of the information from both tables.</li>
<li>If a row doesn’t have a match in the other table, the other table’s column values are set to <code>NA</code>.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb149"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a></a><span class="fu">full_join</span>(subject, exp, <span class="at">by =</span> <span class="st">"id"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div style="text-align:center">
<p><img src="img/fulljoin.png" height="25%" width="40%"></p>
</div>
</section><section id="semi_join" class="slide level2"><h2>semi_join()</h2>
<ul>
<li>A <code>semi_join</code> returns all rows from the left table where there are matching values in the right table, keeping just columns from the left table.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb150"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a></a><span class="fu">semi_join</span>(subject, exp, <span class="at">by =</span> <span class="st">"id"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div style="text-align:center">
<p><img src="img/semijoin.png" height="30%" width="50%"></p>
</div>
<ul>
<li>Unlike an inner join, a semi join will never duplicate the rows in the left table if there is more than one maching row in the right table.</li>
</ul>
<p>Order matters in a semi join.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb151"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a></a><span class="fu">semi_join</span>(exp, subject, <span class="at">by =</span> <span class="st">"id"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="anti_join" class="slide level2"><h2>anti_join()</h2>
<ul>
<li>A <code>anti_join()</code> return all rows from the left table where there are not matching values in the right table, keeping just columns from the left table.</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>anti_join().</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb152"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a></a><span class="fu">anti_join</span>(subject, exp, <span class="at">by =</span> <span class="st">"id"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div style="text-align:center">
<p><img src="img/antijoin.png" height="80%" width="80%"></p>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>Order matters in an anti_join().</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb153"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a></a><span class="fu">anti_join</span>(exp, subject, <span class="at">by =</span> <span class="st">"id"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div style="text-align:center">
<p><img src="img/antijoin1.png" height="80%" width="80%"></p>
</div>
</div>
</div>
</section><section id="bind_rows" class="slide level2"><h2>bind_rows()</h2>
<ul>
<li>You can combine the rows of two tables with <code>bind_rows</code>.</li>
<li>Here we’ll add subject data for subjects 6-9 and bind that to the original subject table.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb154"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a></a>new_subjects <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb154-2"><a></a>  <span class="at">id =</span> <span class="fu">seq</span>(<span class="dv">6</span>, <span class="dv">9</span>),  <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">19</span>, <span class="dv">16</span>, <span class="dv">20</span>, <span class="dv">19</span>),<span class="at">sex =</span> <span class="fu">c</span>(<span class="st">"m"</span>, <span class="st">"m"</span>, <span class="st">"f"</span>, <span class="st">"f"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb155"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a></a><span class="fu">bind_rows</span>(subject, new_subjects)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div style="text-align:center">
<p><img src="img/bind_rows.png" height="25%" width="40%"></p>
</div>
<ul>
<li>The columns just have to have the same names, they don’t have to be in the same order.</li>
</ul></section><section class="slide level2"><ul>
<li><p>Any columns that differ between the two tables will just have <code>NA</code> values for entries from the other table.</p></li>
<li><p>If a row is duplicated between the two tables (like id 5 below), the row will also be duplicated in the resulting table.</p></li>
<li><p>If your tables have the exact same columns, you can use <code><a href="https://rdrr.io/r/base/sets.html">union()</a></code> (see below) to avoid duplicates.</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb156"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a></a>new_subjects1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb156-2"><a></a>  <span class="at">id =</span> <span class="fu">seq</span>(<span class="dv">5</span>, <span class="dv">9</span>), <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">18</span>, <span class="dv">19</span>, <span class="dv">16</span>, <span class="dv">20</span>, <span class="dv">19</span>),</span>
<span id="cb156-3"><a></a>  <span class="at">sex =</span> <span class="fu">c</span>(<span class="st">"f"</span>, <span class="st">"m"</span>, <span class="st">"m"</span>, <span class="st">"f"</span>, <span class="st">"f"</span>), <span class="at">new =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb157"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a></a><span class="fu">bind_rows</span>(subject, new_subjects1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="bind_cols" class="slide level2"><h2>bind_cols()</h2>
<ul>
<li><p>You can merge two tables with the same number of rows using bind_cols.</p></li>
<li><p>This is only useful if the two tables have their rows in the exact same order.</p></li>
<li><p>The only advantage over a left join is when the tables don’t have any IDs to join by and you have to rely solely on their order.</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb158"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a></a>new_info <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb158-2"><a></a>  <span class="at">colour =</span> <span class="fu">c</span>(<span class="st">"red"</span>, <span class="st">"orange"</span>, <span class="st">"yellow"</span>, <span class="st">"green"</span>, <span class="st">"blue"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb159"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a></a><span class="fu">bind_cols</span>(subject, new_info)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div style="text-align:center">
<p><img src="img/bind_cols.png" height="35%" width="40%"></p>
</div>
</section><section id="intersect" class="slide level2"><h2>intersect()</h2>
<ul>
<li>
<code><a href="https://rdrr.io/r/base/sets.html">intersect()</a></code> returns all rows in two tables that match exactly.</li>
<li>
<code><a href="https://rdrr.io/r/base/sets.html">union()</a></code> returns all the rows from both tables, removing duplicate rows.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb160"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a></a>new_subjects <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb160-2"><a></a>  <span class="at">id =</span> <span class="fu">seq</span>(<span class="dv">4</span>, <span class="dv">9</span>), <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">19</span>, <span class="dv">18</span>, <span class="dv">19</span>, <span class="dv">16</span>, <span class="dv">20</span>, <span class="dv">19</span>),</span>
<span id="cb160-3"><a></a>  <span class="at">sex =</span> <span class="fu">c</span>(<span class="st">"f"</span>, <span class="st">"f"</span>, <span class="st">"m"</span>, <span class="st">"m"</span>, <span class="st">"f"</span>, <span class="st">"f"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li><strong>Intersect:</strong></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb161"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a></a>dplyr<span class="sc">::</span><span class="fu">intersect</span>(subject, new_subjects)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div style="text-align:center">
<p><img src="img/intersect.png" height="60%" width="80%"></p>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li><strong>Union:</strong></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb162"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a></a>dplyr<span class="sc">::</span><span class="fu">union</span>(subject, new_subjects)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div style="text-align:center">
<p><img src="img/union.png" height="55%" width="60%"></p>
</div>
</div>
</div>
</section><section id="setdiff" class="slide level2"><h2>setdiff()</h2>
<ul>
<li>
<code>setdiff</code> returns rows that are in the first table, but not in the second table.</li>
</ul>
<p>::: columns ::: {.column width=“50%”}</p>
<ul>
<li>setdiff()</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb163"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a></a><span class="fu">setdiff</span>(subject, new_subjects)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div style="text-align:center">
<p><img src="img/setdiff.png" height="80%" width="80%"></p>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Order matters for <code>setdiff</code>.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb164"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a></a><span class="fu">setdiff</span>(new_subjects, subject)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div style="text-align:center">
<p><img src="img/setdiff1.png" height="80%" width="80%"></p>
</div>
</div>
</div>
</section><section id="converting-data-from-wide-to-long-or-long-to-wide" class="slide level2"><h2>Converting data from wide to long or long to wide</h2>
<h4 id="reshaping-data-using-tidyr-package">Reshaping data using <code>tidyr</code> package</h4>
<ul>
<li>Following are the four important functions to tidy (clean) the data:</li>
</ul>
<table>
<colgroup>
<col style="width: 14%">
<col style="width: 31%">
<col style="width: 53%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Function</th>
<th style="text-align: left;">Objective</th>
<th style="text-align: left;">Arguments</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong><code>gather()</code></strong></td>
<td style="text-align: left;">Transform the data from wide to long</td>
<td style="text-align: left;"><span style="color:red">(data, key, value, na.rm = FALSE)</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong><code>spread()</code></strong></td>
<td style="text-align: left;">Transform the data from long to wide</td>
<td style="text-align: left;"><span style="color:red">(data, key, value)</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong><code>separate()</code></strong></td>
<td style="text-align: left;">Split one variables into two</td>
<td style="text-align: left;"><span style="color:red">(data, col, into, sep= ” “, remove = TRUE)</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong><code>unit()</code></strong></td>
<td style="text-align: left;">Unit two variables into one</td>
<td style="text-align: left;"><span style="color:red">(data, col, conc ,sep= ” “, remove = TRUE)</span></td>
</tr>
</tbody>
</table></section><section id="gather" class="slide level2"><h2><code>gather()</code></h2>
<ul>
<li>The objectives of the <code>gather()</code> function is to transform the data from wide to long.</li>
</ul>
<p>Syntax</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb165"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a></a><span class="fu">gather</span>(data, key, value, <span class="at">na.rm =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Arguments:</p>
<ul>
<li><p><strong>data:</strong> The data frame used to reshape the dataset</p></li>
<li><p><strong>key:</strong> Name of the new column created</p></li>
<li><p><strong>value:</strong> Select the columns used to fill the key column</p></li>
<li><p><strong>na.rm:</strong> Remove missing values. FALSE by default</p></li>
</ul></section><section class="slide level2"><p>Example</p>
<ul>
<li><p>Below, we can visualize the concept of reshaping wide to long.</p></li>
<li><p>We want to create a single column named growth, filled by the rows of the quarter variables.</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb166"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a></a><span class="fu">library</span>(tidyr)</span>
<span id="cb166-2"><a></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(   <span class="co"># Create a dataset</span></span>
<span id="cb166-3"><a></a>  <span class="at">Treatment =</span> <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>),</span>
<span id="cb166-4"><a></a>  <span class="at">q1_2021 =</span> <span class="fu">c</span>(<span class="fl">0.03</span>, <span class="fl">0.05</span>, <span class="fl">0.01</span>),</span>
<span id="cb166-5"><a></a>  <span class="at">q2_2021 =</span> <span class="fu">c</span>(<span class="fl">0.05</span>, <span class="fl">0.07</span>, <span class="fl">0.02</span>),</span>
<span id="cb166-6"><a></a>  <span class="at">q3_2021 =</span> <span class="fu">c</span>(<span class="fl">0.04</span>, <span class="fl">0.05</span>, <span class="fl">0.01</span>),</span>
<span id="cb166-7"><a></a>  <span class="at">q4_2021 =</span> <span class="fu">c</span>(<span class="fl">0.03</span>, <span class="fl">0.02</span>, <span class="fl">0.04</span>),</span>
<span id="cb166-8"><a></a>  <span class="at">q1_2022 =</span> <span class="fu">c</span>(<span class="fl">0.06</span>, <span class="fl">0.07</span>, <span class="fl">0.04</span>),</span>
<span id="cb166-9"><a></a>  <span class="at">q2_2022 =</span> <span class="fu">c</span>(<span class="fl">0.08</span>, <span class="fl">0.07</span>, <span class="fl">0.08</span>),</span>
<span id="cb166-10"><a></a>  <span class="at">q3_2022 =</span> <span class="fu">c</span>(<span class="fl">0.10</span>, <span class="fl">0.08</span>, <span class="fl">0.08</span>),</span>
<span id="cb166-11"><a></a>  <span class="at">q4_2022 =</span> <span class="fu">c</span>(<span class="fl">0.09</span>, <span class="fl">0.09</span>, <span class="fl">0.10</span>))</span>
<span id="cb166-12"><a></a>data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  Treatment q1_2021 q2_2021 q3_2021 q4_2021 q1_2022 q2_2022 q3_2022 q4_2022
1         A    0.03    0.05    0.04    0.03    0.06    0.08    0.10    0.09
2         B    0.05    0.07    0.05    0.02    0.07    0.07    0.08    0.09
3         C    0.01    0.02    0.01    0.04    0.04    0.08    0.08    0.10</code></pre>
</div>
</div>
</section><section id="reshape-the-data" class="slide level2"><h2>Reshape the data</h2>
<ul>
<li>In the <code>gather()</code> function, we create two new variable quarter and growth because our original dataset has one group variable: i.e.&nbsp;treatment and the key-value pairs.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb168"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a></a>long <span class="ot">&lt;-</span>data <span class="sc">%&gt;%</span></span>
<span id="cb168-2"><a></a><span class="fu">gather</span>(quarter, growth, q1_2021<span class="sc">:</span>q4_2022)</span>
<span id="cb168-3"><a></a><span class="fu">head</span>(long, <span class="dv">12</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>   Treatment quarter growth
1          A q1_2021   0.03
2          B q1_2021   0.05
3          C q1_2021   0.01
4          A q2_2021   0.05
5          B q2_2021   0.07
6          C q2_2021   0.02
7          A q3_2021   0.04
8          B q3_2021   0.05
9          C q3_2021   0.01
10         A q4_2021   0.03
11         B q4_2021   0.02
12         C q4_2021   0.04</code></pre>
</div>
</div>
</section><section id="spread" class="slide level2"><h2>spread()</h2>
<ul>
<li>The <code>spread()</code> function does the opposite of gather.</li>
</ul>
<p>Syntax</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb170"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a></a><span class="fu">spread</span>(data, key, value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>arguments:</p>
<ul>
<li><p><strong>data:</strong> The data frame used to reshape the dataset</p></li>
<li><p><strong>key:</strong> Column to reshape long to wide</p></li>
<li><p><strong>value:</strong> Rows used to fill the new column</p></li>
</ul></section><section class="slide level2"><p>Example</p>
<ul>
<li>We can reshape the long dataset back to data with <code>spread()</code>
</li>
</ul>
<h3 id="reshape-the-data-1">Reshape the data</h3>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb171"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a></a>wide <span class="ot">&lt;-</span> long <span class="sc">%&gt;%</span></span>
<span id="cb171-2"><a></a>  <span class="fu">spread</span>(quarter, growth) </span>
<span id="cb171-3"><a></a>wide</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  Treatment q1_2021 q1_2022 q2_2021 q2_2022 q3_2021 q3_2022 q4_2021 q4_2022
1         A    0.03    0.06    0.05    0.08    0.04    0.10    0.03    0.09
2         B    0.05    0.07    0.07    0.07    0.05    0.08    0.02    0.09
3         C    0.01    0.04    0.02    0.08    0.01    0.08    0.04    0.10</code></pre>
</div>
</div>
</section><section id="separate" class="slide level2"><h2>separate()</h2>
<ul>
<li><p>The <code>separate()</code> function splits a column into two according to a separator.</p></li>
<li><p>This function is helpful in some situations where the variable is a date.</p></li>
<li><p>Our analysis can require focussing on month and year and we want to separate the column into two new variables.</p></li>
</ul>
<p>Syntax</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb173"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a></a><span class="fu">separate</span>(data, col, into, <span class="at">sep=</span> <span class="st">""</span>, <span class="at">remove =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>arguments:</p>
<ul>
<li>
<strong>data:</strong> The data frame used to reshape the dataset</li>
<li>
<strong>col:</strong> The column to split</li>
<li>
<strong>into:</strong> The name of the new variables</li>
<li>
<strong>sep:</strong> Indicates the symbol used that separates the variable, i.e.: “-”, “_”, “&amp;”</li>
<li>
<strong>remove:</strong> Remove the old column. By default sets to TRUE.</li>
</ul></section><section class="slide level2"><p>Example</p>
<ul>
<li>We can split the quarter from the year in the tidier dataset by applying the <code>separate()</code> function.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb174"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a></a>separate_tidier <span class="ot">&lt;-</span>long <span class="sc">%&gt;%</span></span>
<span id="cb174-2"><a></a><span class="fu">separate</span>(quarter, <span class="fu">c</span>(<span class="st">"Qrt"</span>, <span class="st">"year"</span>), <span class="at">sep =</span><span class="st">"_"</span>)</span>
<span id="cb174-3"><a></a><span class="fu">head</span>(separate_tidier, <span class="dv">12</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>   Treatment Qrt year growth
1          A  q1 2021   0.03
2          B  q1 2021   0.05
3          C  q1 2021   0.01
4          A  q2 2021   0.05
5          B  q2 2021   0.07
6          C  q2 2021   0.02
7          A  q3 2021   0.04
8          B  q3 2021   0.05
9          C  q3 2021   0.01
10         A  q4 2021   0.03
11         B  q4 2021   0.02
12         C  q4 2021   0.04</code></pre>
</div>
</div>
</section><section id="unite" class="slide level2"><h2>unite()</h2>
<ul>
<li>The <code>unite()</code> function concanates two columns into one.</li>
</ul>
<p>Syntax</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb176"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a></a><span class="fu">unit</span>(data, col, conc ,<span class="at">sep=</span> <span class="st">""</span>, <span class="at">remove =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>arguments: - <strong>data:</strong> The data frame used to reshape the dataset - <strong>col:</strong> Name of the new column - <strong>conc:</strong> Name of the columns to concatenate - <strong>sep:</strong> Indicates the symbol used that unites the variable, i.e: “-”, “_”, “&amp;” - <strong>remove:</strong> Remove the old columns. By default, sets to TRUE —</p>
<p>Example</p>
<ul>
<li><p>In the above example, we separated quarter from year.</p></li>
<li><p>What if we want to merge them.</p></li>
<li><p>We use the following code:</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb177"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a></a>unit_tidier <span class="ot">&lt;-</span> separate_tidier <span class="sc">%&gt;%</span></span>
<span id="cb177-2"><a></a>  <span class="fu">unite</span>(Quarter, Qrt, year, <span class="at">sep =</span><span class="st">"_"</span>)</span>
<span id="cb177-3"><a></a><span class="fu">head</span>(unit_tidier)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="dealing-with-missing-data" class="slide level2"><h2>Dealing with Missing Data</h2>
<h4 id="missing-data-types">Missing data types</h4>
<ul>
<li>One of the most important aspects of data cleaning is missing values.</li>
</ul>
<h4 id="types-of-missing-data">Types of “missing” data:</h4>
<ul>
<li>
<code>NA</code> - general missing data</li>
<li>
<code>NaN</code> - stands for “<strong>N</strong>ot <strong>a</strong> <strong>N</strong>umber”, happens when you do 0/0.</li>
<li>
<code>Inf</code> and <code>-Inf</code> - Infinity, happens when you divide a positive number (or negative number) by 0.</li>
</ul>
<h4 id="finding-missing-data">Finding Missing data</h4>
<ul>
<li>
<code>is.na</code> - looks for <code>NAN</code> and <code>NA</code>
</li>
<li>
<code>is.nan</code>- looks for <code>NAN</code>
</li>
<li>
<code>is.infinite</code> - looks for Inf or -Inf</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb178"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a></a>test<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="cn">NA</span>, <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb178-2"><a></a>test<span class="sc">/</span><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1]  NaN   NA -Inf</code></pre>
</div>
</div>
</section><section class="slide level2"><div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb180"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a></a>test <span class="ot">&lt;-</span>test<span class="sc">/</span><span class="dv">0</span></span>
<span id="cb180-2"><a></a><span class="fu">is.na</span>(test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE</code></pre>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb182"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb182-1"><a></a><span class="fu">is.nan</span>(test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE FALSE FALSE</code></pre>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb184"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a></a><span class="fu">is.infinite</span>(test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE  TRUE</code></pre>
</div>
</div>
<h4 id="useful-checking-functions">Useful checking functions</h4>
<ul>
<li>
<code>any</code> will be <code>TRUE</code> if ANY are true
<ul>
<li>
<code>any(is.na(x))</code> - do we have any <code>NA</code>’s in <code>x</code>?</li>
</ul>
</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb186"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a></a>A <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="cn">NA</span>)</span>
<span id="cb186-2"><a></a>B <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb186-3"><a></a><span class="fu">any</span>(<span class="fu">is.na</span>(A)) <span class="co"># are there any NAs - YES/TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb188"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a></a><span class="fu">any</span>(<span class="fu">is.na</span>(B)) <span class="co"># are there any NAs- NO/FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</section><section id="naniar" class="slide level2"><h2><code>naniar</code></h2>
<ul>
<li>Sometimes you need to look at lots of data though… the <a href="https://cran.r-project.org/web/packages/naniar/vignettes/getting-started-w-naniar.html"><code>naniar</code> package</a> is a good option.</li>
<li>The <code>pct_complete()</code> function shows the percentage that is complete for a given data object, (vector or data frame).</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb190"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a></a><span class="co">#install.packages("naniar")</span></span>
<span id="cb190-2"><a></a><span class="fu">library</span>(naniar)</span>
<span id="cb190-3"><a></a><span class="fu">pct_complete</span>(airquality)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] 95.20697</code></pre>
</div>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb192"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a></a>airquality <span class="sc">%&gt;%</span> <span class="fu">select</span>(Ozone) <span class="sc">%&gt;%</span></span>
<span id="cb192-2"><a></a><span class="fu">pct_complete</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] 75.81699</code></pre>
</div>
</div>
</section><section id="naniar-plots" class="slide level2"><h2>
<code>naniar</code> plots</h2>
<ul>
<li>The <code>gg_miss_var()</code> function creates a nice plot about the number of missing values for each variable, (need a data frame).</li>
</ul>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb194"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a></a><span class="fu">gg_miss_var</span>(airquality)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<img data-src="datamanagment_files/figure-revealjs/unnamed-chunk-142-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"></section><section id="missing-data-issues" class="slide level2"><h2>Missing Data Issues</h2>
<p>Recall that mathematical operations with <code>NA</code> often result in <code>NA</code>s.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb195"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb195-1"><a></a><span class="fu">sum</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="cn">NA</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb197"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb197-1"><a></a><span class="fu">mean</span>(<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="cn">NA</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb199"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb199-1"><a></a><span class="fu">median</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="cn">NA</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
</section><section id="filter-and-missing-data" class="slide level2"><h2>filter() and missing data</h2>
<ul>
<li><p>Be <strong>careful</strong> with missing data using subsetting!</p></li>
<li><p><strong><code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code> removes missing values by default.</strong> Because R can’t tell for sure if an <code>NA</code> value meets the condition.</p></li>
<li><p>To keep them need to add <code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code> conditional.</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb201"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb201-1"><a></a>df <span class="ot">&lt;-</span><span class="fu">tibble</span>(<span class="at">Dog =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="cn">NA</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">1</span>), </span>
<span id="cb201-2"><a></a>            <span class="at">Cat =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">8</span>, <span class="dv">6</span>, <span class="cn">NA</span>, <span class="dv">2</span>, <span class="cn">NA</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb202"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb202-1"><a></a>df </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
    Dog   Cat
  &lt;dbl&gt; &lt;dbl&gt;
1     0    NA
2    NA     8
3     2     6
4     3    NA
5     1     2
6     1    NA</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb204"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb204-1"><a></a>df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Dog <span class="sc">&lt;</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
    Dog   Cat
  &lt;dbl&gt; &lt;dbl&gt;
1     0    NA
2     2     6
3     1     2
4     1    NA</code></pre>
</div>
</div>
</div>
</div>
</section><section id="filter-and-missing-data-1" class="slide level2"><h2>filter() and missing data</h2>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb206"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a></a>df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Dog <span class="sc">&lt;</span> <span class="dv">3</span> <span class="sc">|</span> <span class="fu">is.na</span>(Dog))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
    Dog   Cat
  &lt;dbl&gt; &lt;dbl&gt;
1     0    NA
2    NA     8
3     2     6
4     1     2
5     1    NA</code></pre>
</div>
</div>
</section><section class="slide level2"><h3 id="to-remove-rows-with-na-values-for-a-variable-use-drop_na">To remove rows with <code>NA</code> values for a <strong>variable</strong> use <code>drop_na()</code>
</h3>
<ul>
<li><p>A function from the <code>tidyr</code> package. (Need a data frame to start!)</p></li>
<li><p>Don’t do this unless you have thought about if dropping <code>NA</code> values makes sense based on knowing what these values mean in your data.</p></li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb208"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb208-1"><a></a>df <span class="sc">%&gt;%</span> <span class="fu">drop_na</span>(Dog)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
    Dog   Cat
  &lt;dbl&gt; &lt;dbl&gt;
1     0    NA
2     2     6
3     3    NA
4     1     2
5     1    NA</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb210"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb210-1"><a></a>df <span class="sc">%&gt;%</span> <span class="fu">drop_na</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
    Dog   Cat
  &lt;dbl&gt; &lt;dbl&gt;
1     2     6
2     1     2</code></pre>
</div>
</div>
</div>
</div>
</section><section id="change-a-value-to-be-na" class="slide level2"><h2>Change a value to be <code>NA</code>
</h2>
<ul>
<li>The <code>na_if()</code> function of <code>dplyr</code> can be helpful for this. Let’s say we think that all 0 values should be <code>NA</code>.</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb212"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb212-1"><a></a>df </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
    Dog   Cat
  &lt;dbl&gt; &lt;dbl&gt;
1     0    NA
2    NA     8
3     2     6
4     3    NA
5     1     2
6     1    NA</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb214"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb214-1"><a></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb214-2"><a></a>  <span class="fu">mutate</span>(<span class="at">Dog =</span> <span class="fu">na_if</span>(<span class="at">x =</span> Dog, <span class="at">y =</span> <span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
    Dog   Cat
  &lt;dbl&gt; &lt;dbl&gt;
1    NA    NA
2    NA     8
3     2     6
4     3    NA
5     1     2
6     1    NA</code></pre>
</div>
</div>
</div>
</div>
</section><section id="summary" class="slide level2"><h2>Summary</h2>
<ul>
<li><p><code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code>,<code>any(is.na())</code>, <code>count()</code>, and functions from <code>naniar</code> like <code>gg_miss_var()</code> can help determine if we have <code>NA</code> values</p></li>
<li><p><code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code> automatically removes <code>NA</code> values - can’t confirm or deny if condition is met (need <code>| is.na()</code> to keep them)</p></li>
<li><p><code>drop_na()</code> can help you remove <code>NA</code> values from a variable or an entire data frame</p></li>
<li><p><code>NA</code> values can change your calculation results</p></li>
<li><p>think about what <code>NA</code> values represent - don’t drop them if you shouldn’t</p></li>
</ul></section><section id="data-leaning" class="slide level2"><h2>Data leaning</h2>
<ul>
<li><p>Cleaning data is one of the most essential parts in data analysis.</p></li>
<li><p>Data cleaning is the process of converting messy data into reliable data that can be analyzed in R.</p></li>
<li>
<p>Data cleaning improves data quality and your productivity in R.</p>
<ul>
<li><p>Format ugly data frame column names in R</p></li>
<li><p>Delete all blank rows in R</p></li>
<li><p>Remove duplicate rows in R</p></li>
<li><p>Converting numeric to date format</p></li>
<li><p>Checking consistency by using <code>tably()</code> function</p></li>
</ul>
</li>
</ul></section><section id="clean_names" class="slide level2"><h2><code>clean_names()</code></h2>
<ul>
<li><p>This function is used to change and clean up names of columns in data frames.</p></li>
<li><p>It can be used to ensure consistency.</p></li>
<li><p>You can choose to change all names to <strong>lower cases, separated by underscores</strong>, variations on internal capital letters between words, title case or other styles.</p></li>
<li><p>It can also be used to <strong>remove parts of names and any special characters</strong>, including replacing % symbols with the word percent.</p></li>
<li><p>The most recommended variable names in R is one word, lower case, without special characters.</p></li>
<li><p><code>clean_names()</code> function will be used available in janitor R package to clean column names.</p></li>
</ul></section><section class="slide level2"><div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb216"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb216-1"><a></a><span class="fu">library</span>(janitor); <span class="fu">library</span>(report)</span>
<span id="cb216-2"><a></a>data<span class="ot">&lt;-</span><span class="fu">clean_names</span>(iris)</span>
<span id="cb216-3"><a></a>data <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  sepal_length sepal_width petal_length petal_width species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa</code></pre>
</div>
</div>
</section><section id="remove_empty-remove_constant" class="slide level2"><h2>
<code>remove_empty()</code> &amp; <code>remove_constant()</code>
</h2>
<ul>
<li>Suppose if you want to remove rows and/or columns of if contain completely empty, then you can use <code>remove_empty()</code> function available in janitor R package.</li>
</ul></section><section class="slide level2"><ul>
<li>
<code>remove_empty()</code> removes both empty rows and empty columns.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb218"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb218-1"><a></a>data3<span class="ot">&lt;-</span> <span class="fu">remove_empty</span>(data, <span class="at">which =</span> <span class="fu">c</span>(<span class="st">"rows"</span>,<span class="st">"cols"</span>), <span class="at">quiet =</span> F)</span>
<span id="cb218-2"><a></a>data3 <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  sepal_length sepal_width petal_length petal_width species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa</code></pre>
</div>
</div>
<ul>
<li>Lets add two constant columns to the dataset and see how we can remove all this junk with janitor.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb220"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb220-1"><a></a><span class="co"># add two constant columns</span></span>
<span id="cb220-2"><a></a>data4 <span class="ot">&lt;-</span> data3 <span class="sc">%&gt;%</span> </span>
<span id="cb220-3"><a></a>  <span class="fu">mutate</span>(<span class="at">constant_column   =</span> <span class="dv">42</span>, <span class="at">constant_column_2 =</span> <span class="st">"text"</span>) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section class="slide level2"><div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb221"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb221-1"><a></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb221-2"><a></a>data4 <span class="sc">%&gt;%</span> </span>
<span id="cb221-3"><a></a>  <span class="fu">remove_constant</span>() <span class="sc">%&gt;%</span> <span class="fu">remove_empty</span>() <span class="sc">%&gt;%</span> <span class="fu">kbl</span>() <span class="sc">%&gt;%</span></span>
<span id="cb221-4"><a></a>  <span class="fu">kable_classic_2</span>(<span class="at">full_width =</span> F) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<table class="lightable-classic-2" data-quarto-postprocess="true" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">sepal_length</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sepal_width</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">petal_length</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">petal_width</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">5.1</td>
<td style="text-align: right;">3.5</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.2</td>
</tr>
<tr class="even">
<td style="text-align: right;">4.9</td>
<td style="text-align: right;">3.0</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.2</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4.7</td>
<td style="text-align: right;">3.2</td>
<td style="text-align: right;">1.3</td>
<td style="text-align: right;">0.2</td>
</tr>
<tr class="even">
<td style="text-align: right;">4.6</td>
<td style="text-align: right;">3.1</td>
<td style="text-align: right;">1.5</td>
<td style="text-align: right;">0.2</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">3.6</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: right;">0.2</td>
</tr>
<tr class="even">
<td style="text-align: right;">5.4</td>
<td style="text-align: right;">3.9</td>
<td style="text-align: right;">1.7</td>
<td style="text-align: right;">0.4</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section id="get_dupes" class="slide level2"><h2><code>get_dupes()</code></h2>
<ul>
<li><p>This function retrieves any <code>duplicates</code> in the dataset so that they can be examined during data clean-up operations.</p></li>
<li><p>One trick is determining if a duplicate is indeed a duplicate.</p></li>
<li><p>The function returns a data frame which includes a <code>dupe_count</code> column containing the number of duplicates of that value.</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb222"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb222-1"><a></a>data3 <span class="sc">%&gt;%</span> <span class="fu">get_dupes</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  sepal_length sepal_width petal_length petal_width   species dupe_count
1          5.8         2.7          5.1         1.9 virginica          2
2          5.8         2.7          5.1         1.9 virginica          2</code></pre>
</div>
</div>
</section><section class="slide level2"><ul>
<li>We can also get duplicate values by col names</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb224"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb224-1"><a></a>data3 <span class="sc">%&gt;%</span> <span class="fu">get_dupes</span>(sepal_length, sepal_width) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  sepal_length sepal_width dupe_count petal_length petal_width    species
1          5.8         2.7          4          4.1         1.0 versicolor
2          5.8         2.7          4          3.9         1.2 versicolor
3          5.8         2.7          4          5.1         1.9  virginica
4          5.8         2.7          4          5.1         1.9  virginica
5          5.1         3.8          3          1.5         0.3     setosa
6          5.1         3.8          3          1.9         0.4     setosa</code></pre>
</div>
</div>
<ul>
<li>We can also use <code>distinct()</code> function available in <code>dplyr R package</code> to remove the duplicate rows.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb226"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb226-1"><a></a><span class="fu">library</span>(dplyr)</span>
<span id="cb226-2"><a></a>data_cleaned <span class="ot">&lt;-</span> data3 <span class="sc">%&gt;%</span> <span class="fu">distinct</span>()</span>
<span id="cb226-3"><a></a>data_cleaned <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  sepal_length sepal_width petal_length petal_width species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa</code></pre>
</div>
</div>
</section><section class="slide level2"><p>If we want to remove duplicate rows with respect to a specific variable, we can use <code>distinct()</code> function again. For example, we remove duplicate rows with respect to petal_length.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb228"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb228-1"><a></a>data_cleaned2 <span class="ot">&lt;-</span> data_cleaned <span class="sc">%&gt;%</span>  <span class="fu">distinct</span>(petal_length, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb228-2"><a></a>data_cleaned2 <span class="sc">%&gt;%</span> <span class="fu">head.matrix</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>  sepal_length sepal_width petal_length petal_width species
1          5.1         3.5          1.4         0.2  setosa
2          4.7         3.2          1.3         0.2  setosa
3          4.6         3.1          1.5         0.2  setosa
4          5.4         3.9          1.7         0.4  setosa
5          4.8         3.4          1.6         0.2  setosa
6          4.3         3.0          1.1         0.1  setosa</code></pre>
</div>
</div>
</section><section id="tabyl" class="slide level2"><h2><code>tabyl()</code></h2>
<ul>
<li><p>This function is used to produce frequency tables and contingency tables, i.e.&nbsp;counts of each category or combination of categories of data.</p></li>
<li><p>Unlike the base R <code><a href="https://rdrr.io/r/base/table.html">table()</a></code> function, <code>tabyl()</code> returns a data frame which makes results easier to work with.</p></li>
<li><p>The code below creates a data frame showing the number of rows of data (n) for each location in the dataset.</p></li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb230"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb230-1"><a></a>data_cleaned2 <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(species)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>    species  n   percent
     setosa  9 0.2093023
 versicolor 19 0.4418605
  virginica 15 0.3488372</code></pre>
</div>
</div>
</div>
<ul>
<li>Also returned is a percent column, showing the percentage of rows containing data for that location.</li>
</ul>
<div class="column" style="width:50%;">
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb232"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb232-1"><a></a>data_cleaned2 <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(species)<span class="sc">%&gt;%</span></span>
<span id="cb232-2"><a></a>  <span class="fu">adorn_pct_formatting</span>(<span class="at">digits =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>    species  n percent
     setosa  9  20.93%
 versicolor 19  44.19%
  virginica 15  34.88%</code></pre>
</div>
</div>
</div>
</div>
</section><section id="explore-missing-values" class="slide level2"><h2>Explore missing values</h2>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb234"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb234-1"><a></a><span class="co"># plot missing data (using raw data)</span></span>
<span id="cb234-2"><a></a>DataExplorer<span class="sc">::</span><span class="fu">plot_missing</span>(</span>
<span id="cb234-3"><a></a>  <span class="at">title   =</span> <span class="st">"% of Missing Data (filtered to cols w/missing data)"</span>,</span>
<span id="cb234-4"><a></a>  <span class="at">data    =</span> airquality,</span>
<span id="cb234-5"><a></a>  <span class="at">ggtheme =</span> tidyquant<span class="sc">::</span><span class="fu">theme_tq</span>(), </span>
<span id="cb234-6"><a></a>  <span class="at">missing_only =</span> F) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<img data-src="datamanagment_files/figure-revealjs/unnamed-chunk-162-1.png" class="quarto-figure quarto-figure-center r-stretch" width="576"></section><section id="convert_to_date" class="slide level2"><h2><code>convert_to_date()</code></h2>
<ul>
<li><p>A modern Excel always tries to automate things, and I hate it!</p></li>
<li><p>For instance you write a number into a cell and it sometimes immediately converts it into date. Then you try to have a date in a cell, and it returns a number.</p></li>
<li><p>Moreover, Excel also has some strange date encoding systems, which can be confused with a normal numeric columns.</p></li>
<li><p>Luckily, our dirty dataset has a “date” word in the name of a column “hire_date”, otherwise we wouldn’t know that it is a date:</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb235"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb235-1"><a></a><span class="fu">convert_to_date</span>(d<span class="sc">$</span>hire_date)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="excel_numeric_to_date" class="slide level2"><h2><code>excel_numeric_to_date()</code></h2>
<ul>
<li><p>Ever load data from Excel and see a value like <code>42223</code> where a date should be?</p></li>
<li><p>This function converts those serial numbers to class Date, with options for different Excel date encoding systems, preserving fractions of a date as time (in which case the returned value is of class POSIXlt), and specifying a time zone.</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb236"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb236-1"><a></a><span class="fu">excel_numeric_to_date</span>(<span class="dv">41103</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] "2012-07-13"</code></pre>
</div>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb238"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb238-1"><a></a><span class="fu">excel_numeric_to_date</span>(<span class="fl">41103.01</span>) <span class="co"># ignores decimal places, returns Date object</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] "2012-07-13"</code></pre>
</div>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb240"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb240-1"><a></a><span class="fu">excel_numeric_to_date</span>(<span class="fl">41103.01</span>, <span class="at">include_time =</span> <span class="cn">TRUE</span>) <span class="co"># returns POSIXlt object</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] "2012-07-13 00:14:24 EAT"</code></pre>
</div>
</div>
</section><section id="convert-a-mix-of-date-and-datetime-formats-to-date" class="slide level2"><h2>Convert a mix of date and datetime formats to date</h2>
<ul>
<li><p>Building on <code>excel_numeric_to_date()</code>, the new functions <code>convert_to_date()</code> and <code>convert_to_datetime()</code> are more robust to a mix of inputs.</p></li>
<li><p>Handy when reading many spreadsheets that should have the same column formats, but don’t.</p></li>
</ul>
<p>For instance, here a vector with a date and an Excel datetime sees both values successfully converted to Date class:</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb242"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb242-1"><a></a><span class="fu">convert_to_date</span>(<span class="fu">c</span>(<span class="st">"2020-02-29"</span>, <span class="st">"40000.1"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] "2020-02-29" "2009-07-06"</code></pre>
</div>
</div>
</section><section id="dates" class="slide level2"><h2>Dates</h2>
<ul>
<li>Before dates in a dataset are loaded into R, typically they are stored as a column of character (string) values.</li>
<li>However, dates are inherently numeric and we lose this information when they are stored as strings.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb244"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb244-1"><a></a><span class="co"># string dates have no numeric value, so this errors</span></span>
<span id="cb244-2"><a></a><span class="st">"2018-03-05"</span> <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li><p>In R, we want to convert our string dates to R class <code>Date</code>, which preserves the dates’ numeric values and allows us to take advantage of the many date-related functions in R.</p></li>
<li><p>Once converted to class Date, the numeric value for the date represents the number of days since January 1, 1970 (1970-01-01).</p></li>
</ul></section><section id="as.date" class="slide level2"><h2><code>as.Date()</code></h2>
<ul>
<li>Base R provides <code><a href="https://rdrr.io/r/base/as.Date.html">as.Date()</a></code> to convert strings to dates, but it can be intimidating and unwieldy to use, particularly if your dates are not stored in one of 2 default formats (see <code><a href="https://rdrr.io/r/base/strptime.html">?strptime</a></code> for more about date formats).</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb245"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb245-1"><a></a><span class="co"># as.Date only accepts a couple of formats by default</span></span>
<span id="cb245-2"><a></a><span class="co"># good</span></span>
<span id="cb245-3"><a></a><span class="fu">as.Date</span>(<span class="st">"2015-02-14"</span>)</span>
<span id="cb245-4"><a></a><span class="co"># bad</span></span>
<span id="cb245-5"><a></a><span class="fu">as.Date</span>(<span class="st">"02/14/2014"</span>)</span>
<span id="cb245-6"><a></a><span class="co"># specify a format to fix</span></span>
<span id="cb245-7"><a></a><span class="fu">as.Date</span>(<span class="st">"02/14/2014"</span>, <span class="at">format=</span><span class="st">"%m/%d/%Y"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li>Once our dates are class Date, we can perform date arithmetic.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb246"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb246-1"><a></a>a <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"1971-01-01"</span>)</span>
<span id="cb246-2"><a></a><span class="fu">class</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] "Date"</code></pre>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb248"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb248-1"><a></a><span class="co"># days since 1970-01-01</span></span>
<span id="cb248-2"><a></a><span class="fu">as.numeric</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] 365</code></pre>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb250"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb250-1"><a></a><span class="co"># date arithmetic</span></span>
<span id="cb250-2"><a></a>a <span class="sc">-</span> <span class="fu">as.Date</span>(<span class="st">"1970/12/31"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>Time difference of 1 days</code></pre>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb252"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb252-1"><a></a><span class="do">## Time difference of 1 days</span></span>
<span id="cb252-2"><a></a>a <span class="sc">+</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] "1971-01-03"</code></pre>
</div>
</div>
<ul>
<li>We just need something easier to use to convert strings of various formats to class Date!</li>
</ul></section><section id="package-lubridate" class="slide level2"><h2>Package lubridate</h2>
<ul>
<li><p><code>tidyverse</code> provides the amusingly named package <code>lubridate</code> to help R users convert their string dates to R Date format more easily as well as functions to process those dates.</p></li>
<li><p>The Date conversion functions in lubridate accept a wide variety of date formats, removing the need for us to remember all of those format specifications.</p></li>
<li><p>Instead, just take the letters y, m, and d and place them in the order of the year, month and day, respectively, as they are stored in the date column. That ordering produces the name of the function to convert that column to <code>Date</code> (e.g.<code>ymd()</code>, <code>mdy()</code>, <code>dmy()</code>).</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb254"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb254-1"><a></a><span class="fu">library</span>(lubridate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="using-lubridate" class="slide level2"><h2>Using lubridate</h2>
<ul>
<li>We’ll first load a dataset with various date formats to demonstrate the flexibility of lubridate functions.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb255"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb255-1"><a></a><span class="fu">library</span>(readr)</span>
<span id="cb255-2"><a></a>d <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/dates.csv"</span>)</span>
<span id="cb255-3"><a></a>d</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
  fmt1     fmt2             fmt3           fmt4 decision_time             
  &lt;chr&gt;    &lt;chr&gt;            &lt;date&gt;        &lt;dbl&gt; &lt;chr&gt;                     
1 01/15/89 December 8, 2015 2015-02-27 20090101 Approved 10-10-15 07:15:55
2 02/13/92 January 22, 2012 2016-11-15 20080819 Denied 09-27-11 14:57:23  
3 03/15/84 March 3, 2010    2017-12-25 20071011 Approved 04-24-15 02:03:03</code></pre>
</div>
</div>
</section><section class="slide level2"><ul>
<li><p>Currently, the first 4 columns are stored as <code>chr</code>, <code>chr</code>, <code>date</code>, and <code>int</code>.</p></li>
<li><p>The third column is actually read in as <code>Date</code> by <code>read_csv()</code> because of its particular formatting signals a date to <code>read_csv()</code>.</p></li>
<li><p>The first pair of columns use the order month-day-year, while the second pair of columns use year-month-day.</p></li>
<li><p>So, we want <code>mdy()</code> and <code>ymd()</code>.</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb257"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb257-1"><a></a><span class="co"># no format specifications needed</span></span>
<span id="cb257-2"><a></a><span class="co"># just ordering y,m, and d</span></span>
<span id="cb257-3"><a></a>dates <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">f1=</span><span class="fu">mdy</span>(d<span class="sc">$</span>fmt1), <span class="at">f2=</span><span class="fu">mdy</span>(d<span class="sc">$</span>fmt2),</span>
<span id="cb257-4"><a></a>                    <span class="at">f3=</span><span class="fu">ymd</span>(d<span class="sc">$</span>fmt3), <span class="at">f4=</span><span class="fu">ymd</span>(d<span class="sc">$</span>fmt4))</span>
<span id="cb257-5"><a></a>dates</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>          f1         f2         f3         f4
1 1989-01-15 2015-12-08 2015-02-27 2009-01-01
2 1992-02-13 2012-01-22 2016-11-15 2008-08-19
3 1984-03-15 2010-03-03 2017-12-25 2007-10-11</code></pre>
</div>
</div>
</section><section id="date-time-variables" class="slide level2"><h2>Date-time variables</h2>
<ul>
<li><p>If your date column additionally contains time information (i.e.&nbsp;is date-time), you can add one or more of h, m, and s to y, m, and d to form the function name to convert the string to class <code>POSIXct</code>.</p></li>
<li><p>Class <code>POSIXct</code> stores date-time variables as a number representing the number of seconds since the beginning of 1970.</p></li>
<li><p>The fifth column of our <code>dates</code> dataset, <code>decision_time</code>, is a date-time variable.</p></li>
<li><p>(It also contains an “Approved/Denied” string at the beginning that the <code>lubridate()</code> function will ignore!).</p></li>
<li><p>Specifically, the date-time is recorded as month, day, year, hour, minute, second, so we want <code>mdy_hms()</code>:</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb259"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb259-1"><a></a><span class="co"># month day year hour minute second</span></span>
<span id="cb259-2"><a></a><span class="fu">mdy_hms</span>(d<span class="sc">$</span>decision_time)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] "2015-10-10 07:15:55 UTC" "2011-09-27 14:57:23 UTC"
[3] "2015-04-24 02:03:03 UTC"</code></pre>
</div>
</div>
</section><section class="slide level2"><div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb261"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb261-1"><a></a><span class="co"># POSIXct is a standard way of representing calendar time</span></span>
<span id="cb261-2"><a></a><span class="fu">class</span>(<span class="fu">mdy_hms</span>(d<span class="sc">$</span>decision_time))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] "POSIXct" "POSIXt" </code></pre>
</div>
</div>
<ul>
<li>The ‘time zone’ standard <code>UTC</code> (Coordinated Universal Time) is used as the default zone. Use the argument, <code>tz=</code> to assign a zone.</li>
<li>To see a list of valid time zone specifications, run <code><a href="https://rdrr.io/r/base/timezones.html">OlsonNames()</a></code>.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb263"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb263-1"><a></a><span class="co"># we'll use this for our dates variable</span></span>
<span id="cb263-2"><a></a>dates<span class="sc">$</span>decision_time <span class="ot">&lt;-</span> <span class="fu">mdy_hms</span>(d<span class="sc">$</span>decision_time, <span class="at">tz=</span><span class="st">"US/Pacific"</span>)</span>
<span id="cb263-3"><a></a>dates<span class="sc">$</span>decision_time</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] "2015-10-10 07:15:55 PDT" "2011-09-27 14:57:23 PDT"
[3] "2015-04-24 02:03:03 PDT"</code></pre>
</div>
</div>
</section><section id="extracting-information-from-date-variables" class="slide level2"><h2>Extracting information from Date variables</h2>
<ul>
<li>lubridate provides several functions to extract specific information from Date variables including:
<ul>
<li>
<code>day()</code>: day of the month</li>
<li>
<code>wday()</code>: weekday</li>
<li>
<code>yday()</code>: day of the year</li>
<li>
<code>month()</code>: month of the year</li>
<li>
<code>year()</code>: year</li>
</ul>
</li>
<li>Some examples of extracting information from Date variables.</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb265"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb265-1"><a></a><span class="co"># we'll use the first column of our dates dataset</span></span>
<span id="cb265-2"><a></a>dates<span class="sc">$</span>f1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] "1989-01-15" "1992-02-13" "1984-03-15"</code></pre>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb267"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb267-1"><a></a><span class="co"># day of the month</span></span>
<span id="cb267-2"><a></a><span class="fu">day</span>(dates<span class="sc">$</span>f1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] 15 13 15</code></pre>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb269"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb269-1"><a></a><span class="co"># day of the year</span></span>
<span id="cb269-2"><a></a><span class="fu">yday</span>(dates<span class="sc">$</span>f1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] 15 44 75</code></pre>
</div>
</div>
</section><section class="slide level2"><ul>
<li>Some more date information extraction:</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb271"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb271-1"><a></a><span class="co"># weekday as numbers</span></span>
<span id="cb271-2"><a></a><span class="fu">wday</span>(dates<span class="sc">$</span>f1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] 1 5 5</code></pre>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb273"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb273-1"><a></a><span class="co"># weekday with labels</span></span>
<span id="cb273-2"><a></a><span class="fu">wday</span>(dates<span class="sc">$</span>f1, <span class="at">label=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] Sun Thu Thu
Levels: Sun &lt; Mon &lt; Tue &lt; Wed &lt; Thu &lt; Fri &lt; Sat</code></pre>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb275"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb275-1"><a></a><span class="co"># month of the year</span></span>
<span id="cb275-2"><a></a><span class="fu">month</span>(dates<span class="sc">$</span>f1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3</code></pre>
</div>
</div>
</section><section id="extracting-information-from-posixct-variables" class="slide level2"><h2>Extracting information from POSIXct variables</h2>
<ul>
<li>
<p>lubridate also has functions to extract time information from POSIXct date-time variables.</p>
<ul>
<li><code>hour()</code></li>
<li><code>minute()</code></li>
<li><code>second()</code></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb277"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb277-1"><a></a><span class="fu">with</span>(dates,  <span class="do">## with() tells R to look for variables in object "dates"</span></span>
<span id="cb277-2"><a></a><span class="fu">data.frame</span>(<span class="at">time=</span>decision_time, <span class="at">h=</span><span class="fu">hour</span>(decision_time),</span>
<span id="cb277-3"><a></a>           <span class="at">m=</span><span class="fu">minute</span>(decision_time), <span class="at">s=</span><span class="fu">second</span>(decision_time)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>                 time  h  m  s
1 2015-10-10 07:15:55  7 15 55
2 2011-09-27 14:57:23 14 57 23
3 2015-04-24 02:03:03  2  3  3</code></pre>
</div>
</div>
</li>
</ul></section><section class="slide level2"><ul>
<li><p>Two sets of functions for date-time arithmetic</p></li>
<li><p>If you need to add or subtract time to your date variables, lubridate provides 2 sets of functions.</p></li>
<li><p>One set gives “intuitive” results, and will ignore conventions like leap year.</p></li>
<li><p>These include <code>seconds()</code>, <code>minutes()</code>, <code>hours()</code>, <code>days()</code>, <code>weeks()</code>, <code>years()</code>.</p></li>
<li><p>The other set will adhere to those conventions, and are named by adding d to the names of the previous functions, <code>dseconds()</code>, <code>dminutes()</code>, <code>dhours()</code>, <code>ddays()</code>, <code>dweeks()</code>, <code>dyears()</code>.</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb279"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb279-1"><a></a><span class="co">#2016 is a leap year</span></span>
<span id="cb279-2"><a></a><span class="co"># the intuitive result</span></span>
<span id="cb279-3"><a></a><span class="fu">ymd</span>(<span class="st">"2015-02-14"</span>) <span class="sc">+</span> <span class="fu">years</span>(<span class="dv">2</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] "2017-02-14"</code></pre>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb281"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb281-1"><a></a><span class="co"># the exact result</span></span>
<span id="cb281-2"><a></a><span class="fu">ymd</span>(<span class="st">"2015-02-14"</span>) <span class="sc">+</span> <span class="fu">dyears</span>(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] "2017-02-13 12:00:00 UTC"</code></pre>
</div>
</div>
</section><section id="section" class="slide level2"><h2></h2>
<p><strong>Easy data cleaning with the janitor package</strong></p>
</section><section id="clean-column-names" class="slide level2"><h2><strong>Clean column names</strong></h2>
<ul>
<li>add some points about
<ul>
<li>count</li>
<li>tably</li>
<li>percent for making quick graphs</li>
</ul>
</li>
</ul>
<p>https://www.r-bloggers.com/2024/05/easy-data-cleaning-with-the-janitor-package/</p>

<div class="quarto-auto-generated-content">
<div class="footer footer-default">

</div>
</div>
</section>
</div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="../../../site_libs/revealjs/dist/reveal.js"></script><!-- reveal.js plugins --><script src="../../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script><script src="../../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script><script src="../../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script><script src="../../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script><script src="../../../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script><script src="../../../site_libs/revealjs/plugin/multiplex/socket.io.js"></script><script src="../../../site_libs/revealjs/plugin/multiplex/multiplex.js"></script><script src="../../../site_libs/revealjs/plugin/quarto-support/support.js"></script><script src="../../../site_libs/revealjs/plugin/notes/notes.js"></script><script src="../../../site_libs/revealjs/plugin/search/search.js"></script><script src="../../../site_libs/revealjs/plugin/zoom/zoom.js"></script><script src="../../../site_libs/revealjs/plugin/math/math.js"></script><script>window.define = window.backupDefine; window.backupDefine = undefined;</script><script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true,"boardmarkerWidth":3},
'multiplex': {"secret":"17235709688254852916","id":"e28a3be54c500ae7","url":"https://reveal-multiplex.glitch.me/"},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script><script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script><script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>


</body></html>